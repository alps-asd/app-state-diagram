<html lang="en">
<head>
    <title>ALPS Book Store</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
    <style>body {
    background-color: white;
}
.markdown-body {
    margin: 0;
    max-width: none;
    padding: 0 24px;
}

@media (max-width: 767px) {
    .markdown-body {
        padding: 0 16px;
    }
}

/* テーブルレイアウトの改善 */
.markdown-body table {
    table-layout: fixed;
    width: 100%;
    max-width: 1200px;
}
.markdown-body table th:nth-child(1) {
    width: 2%;
}
.markdown-body table th:nth-child(2) {
    width: 15%;
}
.markdown-body table th:nth-child(3) {
    width: 30%;
}
.markdown-body table th:nth-child(4) {
    width: 25%;
}
.markdown-body table th:nth-child(5) {
    width: 28%;
}
.markdown-body table td {
    word-wrap: break-word;
    overflow-wrap: break-word;
}
.doc-tooltip {
    text-decoration: none;
    border-bottom: 1px dotted #666;
    cursor: pointer;
    position: relative;
    display: inline-block;
}
.doc-tooltip .tooltip-text {
    visibility: hidden;
    width: 300px;
    background-color: #f8f8f8;
    color: #333;
    text-align: left;
    border-radius: 3px;
    padding: 8px 12px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -150px;
    opacity: 0;
    transition: opacity 0.3s;
    border: 1px solid #ddd;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    font-size: inherit;
    line-height: 1.5;
    white-space: normal;
    word-wrap: break-word;
}
.doc-tooltip:hover .tooltip-text {
    visibility: visible;
    opacity: 1;
}

/* 互換性のためのスタイル */
.markdown-body abbr {
    text-decoration: none;
    border-bottom: 1px dotted #666;
    cursor: help;
    position: relative;
}

/* 1. Profile折りたたみスタイル */
.profile-section {
    border: 1px solid #e1e4e8;
    border-radius: 6px;
    margin-top: 20px;
}

.profile-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    background-color: #f6f8fa;
    border-bottom: 1px solid #e1e4e8;
    cursor: pointer;
    font-weight: 600;
}

.profile-header:hover {
    background-color: #f1f3f4;
}

.profile-toggle {
    display: inline-block;
    margin-right: 8px;
    transition: transform 0.2s ease;
}

.profile-toggle.expanded {
    transform: rotate(90deg);
}

.profile-content {
    display: none;
    padding: 16px;
}

.profile-content.visible {
    display: block;
}

/* 2. コピーボタンスタイル */
.copy-button {
    margin-left: 16px;
    padding: 4px 12px;
    border: 1px solid #d0d7de;
    border-radius: 4px;
    background: white;
    color: #586069;
    cursor: pointer;
    font-size: 12px;
    font-weight: normal;
}

.copy-button:hover {
    background: #f3f4f6;
    border-color: #0969da;
}

.copy-button.copied {
    color: #2ea043;
    border-color: #2ea043;
}

/* 3. グラフズームコントロールスタイル */
.zoom-controls {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    flex-direction: row;
    gap: 3px;
    z-index: 100;
}

.zoom-button {
    min-width: 26px;
    height: 26px;
    border: 1px solid #d0d7de;
    border-radius: 3px;
    background: white;
    cursor: pointer;
    font-size: 14px;
    opacity: 0.8;
    padding: 0 4px;
}

.zoom-button:hover {
    opacity: 1;
    background: #f6f8fa;
}

.zoom-button:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

/* 4. 検索ボックススタイル */
.search-container {
    margin: 20px 0;
    position: relative;
}

.search-input {
    width: 100%;
    padding: 8px 12px 8px 36px;
    border: 1px solid #d0d7de;
    border-radius: 4px;
    font-size: 14px;
}

.search-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    color: #586069;
}

.search-clear {
    position: absolute;
    right: 10px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #586069;
    display: none;
}

.search-clear.visible {
    display: block;
}

/* テーブル行と検索セルのハイライト */
table tr.highlight {
    background-color: #fff5b1;
}

table tr.hidden {
    display: none;
}

/* 検索結果のセルハイライト - !importantでスタイルを強制適用 */
table td.highlight {
    background-color: #fff5b1 !important; /* 黄色いハイライト */
}

/* レスポンシブ対応の改善 */
@media (max-width: 768px) {
    .zoom-controls {
        left: 5px;
        bottom: 5px;
    }

    .profile-header {
        padding: 8px 12px;
    }
}
#svg-container {
    /* 既存のスタイルも維持 */
    height: auto;
    display: flex;
    justify-content: flex-start; /* SVGが小さい場合に左寄せ */
    align-items: flex-start; /* 上部から表示開始（中央揃えではなく） */
    overflow-x: scroll; /* 常に水平スクロールバーを表示 */
    overflow-y: hidden; /* 縦方向のスクロールは不要 */

    width: 100vw;
    max-width: none; /* 親要素(.markdown-body)のmax-width制限を解除 */
    box-sizing: border-box; /* paddingやborderを幅計算に含める */

    /*
     * .markdown-body の margin: 0 auto による中央揃えを打ち消し、
     * 左端に合わせるためのネガティブマージン。
     * calc(50% - 50vw) は、中央からビューポート幅の半分だけ左にずらす計算。
     */
    margin-left: calc(50% - 50vw);
    margin-right: calc(50% - 50vw); /* 同様に右マージンも設定（厳密には不要な場合も）*/

    padding-left: 24px;
    padding-right: 0px;
    position: relative; /* 子要素の絶対位置指定のための基準点 */
}
#asd-graph-id, #asd-graph-name {
    position: relative;
    flex-shrink: 0;
    display: block;
}
#svg-container svg {
    max-width: none;
    display: block;
    margin: 0;
    transform-origin: bottom left; /* 変形の基準点を左上に設定 */
    transition: transform 0.2s ease; /* ズーム変更時のアニメーション */
}
.asd-view-selector {
    display: flex;
    align-items: center;
    margin-top: 40px;
    margin-bottom: 10px;
}
.asd-view-selector label {
    margin-right: 10px;
}
.asd-view-selector input[type="radio"] {
    margin-right: 5px;
}
.selector-container {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 8px 12px;
    margin-bottom: 10px;
}
.selector-label {
    min-width: 40px;
    margin-right: 10px;
}
.selector-options {
    display: flex;
}
.selector-option {
    margin-right: 15px;
}
input[type="radio"],
input[type="checkbox"] {
    margin-right: 2px;
    vertical-align: middle;
}

/* Sematic Descriptor List */
.descriptor-list {
    max-width: 100%;
    margin: 0;
    padding: 20px;
}
.descriptor-list ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
    width: 100%;
}
.descriptor-list li {
    margin-bottom: 5px;
    display: flex;
    align-items: center;
}
.descriptor-list .indicator {
    width: 16px;
    height: 16px;
    display: inline-block;
    margin-right: 8px;
    border: 1px solid #000;
}
.descriptor-list .semantic {
    background-color: #FFFFFF;
}
.descriptor-list .safe {
    background-color: #00A86B;
    background-image: linear-gradient(45deg, #008000 25%, transparent 25%, transparent 75%, #008000 75%, #008000),
    linear-gradient(45deg, #008000 25%, transparent 25%, transparent 75%, #008000 75%, #008000);
    background-size: 8px 8px;
    background-position: 0 0, 4px 4px;
}
.descriptor-list .unsafe {
    background-color: #FF4136;
    background-image: repeating-linear-gradient(45deg, #FF4136, #FF4136 4px, #FF725C 4px, #FF725C 8px);
}

.descriptor-list .idempotent {
    background-color: #FFDC00;
    background-image: radial-gradient(#FFB700 20%, transparent 20%),
    radial-gradient(#FFB700 20%, transparent 20%);
    background-size: 8px 8px;
    background-position: 0 0, 4px 4px;
}
.descriptor-list .item-name {
    color: #000;
    text-decoration: none;
}

.legend {
    background-color: #ffffff;
    border-radius: 8px;
    padding: 10px;
    display: inline-flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 20px;
}
table .legend {
    background-color: transparent;
    padding: 0;
    margin: 0;
    display: inline-flex;
    align-items: center;
}
.legend-item {
    display: flex;
    align-items: center;
    font-size: 14px;
    color: #333;
}
.legend-icon {
    width: 16px;
    height: 16px;
    border: 1px solid #000;
    margin-right: 8px;
}
.legend .semantic { background-color: #FFFFFF; }
.legend .safe {
    background-color: #00A86B;
    background-image: linear-gradient(45deg, #008000 25%, transparent 25%, transparent 75%, #008000 75%, #008000),
    linear-gradient(45deg, #008000 25%, transparent 25%, transparent 75%, #008000 75%, #008000);
    background-size: 8px 8px;
    background-position: 0 0, 4px 4px;
}
.legend .unsafe {
    background-color: #FF4136;
    background-image: repeating-linear-gradient(45deg, #FF4136, #FF4136 4px, #FF725C 4px, #FF725C 8px);
}
.legend .idempotent {
    background-color: #FFDC00;
    background-image: radial-gradient(#FFB700 20%, transparent 20%),
    radial-gradient(#FFB700 20%, transparent 20%);
    background-size: 8px 8px;
    background-position: 0 0, 4px 4px;
}
.type-indicator-small {
    display: inline-block;
    width: 10px;
    height: 10px;
    margin-right: 4px;
    border: 1px solid #000;
    vertical-align: middle;
}

.type-indicator-small.semantic {
    background-color: #FFFFFF;
}

.type-indicator-small.safe {
    background-color: #00A86B;
    background-image: linear-gradient(45deg, #008000 25%, transparent 25%, transparent 75%, #008000 75%, #008000),
    linear-gradient(45deg, #008000 25%, transparent 25%, transparent 75%, #008000 75%, #008000);
    background-size: 6px 6px;
    background-position: 0 0, 3px 3px;
}

.type-indicator-small.unsafe {
    background-color: #FF4136;
    background-image: repeating-linear-gradient(45deg, #FF4136, #FF4136 3px, #FF725C 3px, #FF725C 6px);
}

.type-indicator-small.idempotent {
    background-color: #FFDC00;
    background-image: radial-gradient(#FFB700 20%, transparent 20%),
    radial-gradient(#FFB700 20%, transparent 20%);
    background-size: 6px 6px;
    background-position: 0 0, 3px 3px;
}
.meta-container {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.meta-container br {
    display: none;
}

.meta-item {
    display: flex;
    align-items: center;
    line-height: normal;
}

.meta-label {
    font-size: 0.85em;
    color: #777;
    width: 45px;
    text-align: right;
    padding-right: 10px;
    flex-shrink: 0;
}

.meta-values {
    display: inline-flex;
    flex-wrap: wrap;
}

.meta-tag {
    display: inline-block;
    padding: 3px 10px;
    border-radius: 4px;
    font-size: 0.8em;
    background-color: #f7f7f7;
    border: 1px solid #e0e0e0;
    color: #3b71ca;
    margin: 0 8px 4px 0;
}

.def-tag {
    background-color: #EAF5FF; /* 薄いブルー */
    border-color: #B8DFFF; /* やや濃いめ */
    color: #0366D6; /* リンク色っぽいブルー */
}

.rt-tag {
    background-color: #FFF5E6; /* 薄いオレンジ */
    border-color: #FFE1B3;
    color: #D97506; /* 濃いオレンジ */
}

.tag-tag {
    background-color: #E6FFED; /* 薄いグリーン */
    border-color: #C6EFC7;
    color: #22863A; /* 濃いグリーン */
}

.doc-tag {
    background-color: #FFFBEA;  /* やや控えめなクリーム色 */
    border-color: #FFE8A1;      /* 柔らかい縁取りの黄色 */
    color: #8A6D1B;             /* 落ち着いた茶系 */
    border: 1px solid #FFE8A1;
    padding: 3px 8px;
    font-size: 0.8em;
    border-radius: 4px;
}
.doc-tag.clickable {
    cursor: pointer;
}

/* テーブルセル内でのメタ情報の折り返し */
.markdown-body table td:nth-child(5) {
    padding-left: 4px !important;
    vertical-align: middle;
}

.zoom-controls, .global-zoom-controls {
    display: inline-block;
    vertical-align: middle;
    position: static !important; /* absoluteを上書き */
}

.zoom-button {
    margin: 0 2px;
}

#svg-container svg {
    transform-origin: bottom left;
}
</style>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/@hpcc-js/wasm@2.21.0/dist/graphviz.umd.js" type="javascript/worker"></script>
    <script src="https://unpkg.com/d3-graphviz@5.6.0/build/d3-graphviz.min.js"></script>
<script>// Applies smooth scroll to links
const ease = (t, b, c, d) => {
    t /= d / 2;
    if (t < 1) return (c / 2) * t * t + b;
    t--;
    return (-c / 2) * (t * (t - 2) - 1) + b;
};

// Smoothly scrolls to the target element
const smoothScrollTo = (targetElement) => {
    const targetPosition = targetElement.getBoundingClientRect().top + window.pageYOffset;
    const startPosition = window.pageYOffset;
    const distance = targetPosition - startPosition;
    const duration = 1000;
    let startTime = null;

    const animate = (currentTime) => {
        if (!startTime) startTime = currentTime;
        const timeElapsed = currentTime - startTime;
        const run = ease(timeElapsed, startPosition, distance, duration);
        window.scrollTo(0, run);
        if (timeElapsed < duration) requestAnimationFrame(animate);
    };

    requestAnimationFrame(animate);
    history.pushState(null, null, '#' + targetElement.getAttribute('name'));
};

const applySmoothScrollToLinks = (links) => {
    links.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const href = link.getAttribute('href') || link.getAttribute('xlink:href');
            if (!href) {
                console.error("No href found for link:", link);
                return;
            }
            const targetName = href.startsWith('#') ? href.slice(1) : href;
            const targetElement = document.querySelector(`[id="${targetName}"]`);
            if (!targetElement) {
                console.error("Target element not found for link:", href);
                return;
            }
            smoothScrollTo(targetElement);

            // URLを更新
            history.pushState(null, null, href);
        });
    });
};

// Renders the graph and applies smooth scroll to links
const renderGraph = (graphId, dotString) => {
    d3.select(graphId).graphviz()
        .zoom(false)
        .renderDot(dotString).on('end', () => {
            applySmoothScrollToLinks(document.querySelectorAll('svg a[*|href^="#"]'));
    });
};

// Sets up event listeners for tags
const setupTagEventListener = (eventName, titles, color, defaultColor = 'lightgrey', defaultEdgeColor = 'black') => {
    const changeColor = (useDefault) => {
        titles.forEach(title => {
            changeColorByTitle(title, useDefault ? defaultColor : color, useDefault ? defaultEdgeColor : color);
        });
    };

    document.addEventListener(`tagon-${eventName}`, () => changeColor(false));
    document.addEventListener(`tagoff-${eventName}`, () => changeColor(true));
};

// Sets up triggers for tags
const setupTagTrigger = () => {
    const checkboxes = document.querySelectorAll('.tag-trigger-checkbox');
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function () {
            this.checked ?
                document.dispatchEvent(new CustomEvent('tagon-' + this.getAttribute('data-tag'))) :
                document.dispatchEvent(new CustomEvent('tagoff-' + this.getAttribute('data-tag')));
        });
    });
};

// Changes color of elements by title or class
const changeColorByTitle = (titleOrClass, newNodeColor, newEdgeColor) => {
    const elements = Array.from(document.getElementsByTagName('g'));

    elements.forEach(element => {
        const titleElement = element.getElementsByTagName('title')[0];
        const title = titleElement ? titleElement.textContent : '';

        if (title === titleOrClass || element.classList.contains(titleOrClass)) {
            const polygons = Array.from(element.getElementsByTagName('polygon'));
            const paths = Array.from(element.getElementsByTagName('path'));

            polygons.forEach(polygon => {
                polygon.setAttribute('fill', newNodeColor);
            });

            paths.forEach(path => {
                path.setAttribute('stroke', newEdgeColor);
            });
        }
    });
};

// Sets up mode switch for graph display
const setupModeSwitch = (switchId, graphId, otherGraphId) => {
    document.getElementById(switchId).addEventListener('change', (e) => {
        document.getElementById(graphId).style.display = e.target.checked ? 'block' : 'none';
        document.getElementById(otherGraphId).style.display = e.target.checked ? 'none' : 'block';
    });
};

const setupTagClick = () => {
    document.querySelectorAll('.meta-tag.tag-tag a').forEach(link => {
        link.addEventListener('click', e => {
            e.preventDefault();
            const tagName = link.textContent.trim();
            const checkbox = document.querySelector(`#tag-${tagName}`);
            if (checkbox) {
                checkbox.checked = true;
                checkbox.dispatchEvent(new Event('change'));
            }
        });
    });
}
const setupDocClick = () => {
    // Define constants for better maintainability
    const MAX_LENGTH = 140;
    const TRUNCATE_LENGTH = 70;
    document.querySelectorAll('.doc-tag').forEach(el => {
        const full = el.dataset.full;
        if (!full || full.length <= MAX_LENGTH) return;
        const short = full.slice(0, TRUNCATE_LENGTH) + '...';
        el.innerText = short;
        el.classList.add('expandable');
        el.classList.add('clickable');
        // Make element keyboard accessible
        el.setAttribute('tabindex', '0');
        el.setAttribute('role', 'button');
        el.setAttribute('aria-expanded', 'false');
        el.setAttribute('aria-label', 'Expand to read more');
        const toggleExpansion = () => {
            const expanded = el.classList.toggle('expanded');
            el.innerText = expanded ? full : short;
            el.setAttribute('aria-expanded', expanded ? 'true' : 'false');
            el.setAttribute('aria-label', expanded ? 'Collapse text' : 'Expand to read more');
        };
        el.addEventListener('click', toggleExpansion);
        el.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                toggleExpansion();
            }
        });
    });
};

// Profile折りたたみ機能
function setupProfileCollapse() {
    const profileHeader = document.querySelector('.profile-header');
    const profileContent = document.querySelector('.profile-content');
    const profileToggle = document.querySelector('.profile-toggle');

    if (!profileHeader || !profileContent || !profileToggle) return;

    // 初期状態は折りたたんだ状態
    profileContent.classList.remove('visible');

    profileHeader.addEventListener('click', (e) => {
        // コピーボタンがクリックされた場合は折りたたみ処理をスキップ
        if (e.target.classList.contains('copy-button')) return;

        profileContent.classList.toggle('visible');
        profileToggle.classList.toggle('expanded');
    });
}

// コピー機能
function setupCopyButton() {
    const copyButton = document.querySelector('.copy-button');
    if (!copyButton) return;

    copyButton.addEventListener('click', async (e) => {
        e.stopPropagation(); // 親要素のクリックイベントを防ぐ

        const profileContent = document.querySelector('.profile-content pre code');
        if (!profileContent) return;

        try {
            await navigator.clipboard.writeText(profileContent.textContent);
            copyButton.textContent = 'Copied!';
            copyButton.classList.add('copied');
            setTimeout(() => {
                copyButton.textContent = 'Copy';
                copyButton.classList.remove('copied');
            }, 2000);
        } catch (err) {
            console.error('Failed to copy: ', err);
        }
    });
}

// 検索機能
function setupSearch() {
    // 検索ボックスを追加
    const semanticHeader = document.querySelector('h2:nth-of-type(1)');
    if (!semanticHeader) return;

    const searchContainer = document.createElement('div');
    searchContainer.className = 'search-container';
    searchContainer.innerHTML = `
            <svg class="search-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M7.333 12.667A5.333 5.333 0 1 0 7.333 2a5.333 5.333 0 0 0 0 10.667zm5.334 1L10 11" 
                      stroke="currentColor" stroke-width="1.33" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="text" class="search-input" placeholder="Search semantic descriptors...">
            <span class="search-clear">×</span>
        `;

    // h2の下にテーブルがあるので、その間に挿入
    const table = semanticHeader.nextElementSibling;
    if (table && table.tagName === 'TABLE') {
        semanticHeader.after(searchContainer);
    }

    const searchInput = searchContainer.querySelector('.search-input');
    const searchClear = searchContainer.querySelector('.search-clear');
    const tableRows = table.querySelectorAll('tbody tr');

    searchInput.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        searchClear.classList.toggle('visible', query.length > 0);

        tableRows.forEach(row => {
            // すべての行のテキストを検索対象とする
            const text = row.textContent.toLowerCase();
            const isVisible = query === '' || text.includes(query);
            row.classList.toggle('hidden', !isVisible);

            // マッチしたセルのみにhighlightクラスを追加
            if (query !== '' && isVisible) {
                // すべてのセルを確認
                const cells = row.querySelectorAll('td');
                cells.forEach(cell => {
                    const cellText = cell.textContent.toLowerCase();
                    if (cellText.includes(query)) {
                        cell.classList.add('highlight');
                    } else {
                        cell.classList.remove('highlight');
                    }
                });
            } else {
                // ハイライトをクリア
                const cells = row.querySelectorAll('td');
                cells.forEach(cell => {
                    cell.classList.remove('highlight');
                });
            }
        });
    });

    searchClear.addEventListener('click', () => {
        searchInput.value = '';
        searchClear.classList.remove('visible');
        tableRows.forEach(row => {
            row.classList.remove('hidden');

            // すべてのセルからハイライトを削除
            const cells = row.querySelectorAll('td');
            cells.forEach(cell => {
                cell.classList.remove('highlight');
            });
        });
    });
}

// Profile折りたたみ機能のためのDOM構造を作成
function enhanceProfileSection() {
    const profileHeader = document.querySelector('h2:last-of-type');
    const profilePre = profileHeader.nextElementSibling;

    if (profileHeader && profilePre && profilePre.tagName === 'PRE') {
        // プロファイルセクションの構造を変更
        const section = document.createElement('div');
        section.className = 'profile-section';

        const header = document.createElement('div');
        header.className = 'profile-header';
        header.innerHTML = `
                <div>
                    <span class="profile-toggle">▶</span>
                    <span>Profile</span>
                </div>
                <button class="copy-button">Copy</button>
            `;

        const content = document.createElement('div');
        content.className = 'profile-content';
        content.appendChild(profilePre.cloneNode(true));

        section.appendChild(header);
        section.appendChild(content);

        // 元のh2とpreを置き換える
        profileHeader.replaceWith(section);
        profilePre.remove();

        // 折りたたみとコピー機能をセットアップ
        setupProfileCollapse();
        setupCopyButton();
    }
}

</script>
<script>// グラフズーム機能のセットアップ（+/-ボタンのみ）
let currentScale = 1;
const minScale = 0.1;
const maxScale = 3;

function setupGraphZoom() {
    console.log("Setting up zoom controls...");
    const zoomControlsContainer = document.querySelector('#zoom-controls-container');
    if (!zoomControlsContainer) {
        console.log('Zoom controls container not found');
        return;
    }

    // グローバルなズームコントロールを追加
    const zoomControls = document.createElement('div');
    zoomControls.className = 'zoom-controls global-zoom-controls';
    zoomControls.innerHTML = `
        <button class="zoom-button" data-zoom="in">+</button>
        <button class="zoom-button" data-zoom="out">−</button>
        <button class="zoom-button" data-zoom="reset">1:1</button>
    `;
    zoomControlsContainer.appendChild(zoomControls);
    
    // SVG要素の監視と初期設定
    setupSvgObservers();
    
    // ズームイン
    zoomControls.querySelector('[data-zoom="in"]').addEventListener('click', () => {
        currentScale = Math.min(currentScale * 1.2, maxScale);
        updateAllSvgZoom(zoomControls);
    });

    // ズームアウト
    zoomControls.querySelector('[data-zoom="out"]').addEventListener('click', () => {
        currentScale = Math.max(currentScale / 1.2, minScale);
        updateAllSvgZoom(zoomControls);
    });

    // リセット
    zoomControls.querySelector('[data-zoom="reset"]').addEventListener('click', () => {
        currentScale = 1;
        updateAllSvgZoom(zoomControls);
    });
}

function setupSvgObservers() {
    const containers = ['#asd-graph-id', '#asd-graph-name'];
    
    containers.forEach(containerId => {
        const container = document.querySelector(containerId);
        if (!container) {
            console.log(`Container ${containerId} not found`);
            return;
        }
        
        // SVGを探す
        let svg = container.querySelector('svg');
        
        // SVGが見つからない場合は監視して再試行
        if (!svg) {
            console.log(`SVG not found in ${containerId}, setting up observer`);
            // SVG要素が追加されるのを監視
            const observer = new MutationObserver((mutations, obs) => {
                mutations.forEach(mutation => {
                    if (mutation.addedNodes.length) {
                        svg = container.querySelector('svg');
                        if (svg) {
                            console.log('SVG found in ' + containerId + ' after waiting');
                            obs.disconnect(); // 監視を停止
                            // 初期ズームを適用
                            svg.style.transform = `scale(${currentScale})`;
                        }
                    }
                });
            });
            
            observer.observe(container, { childList: true, subtree: true });
        } else {
            console.log(`SVG found immediately ${containerId}`);
            // 初期ズームを適用
            svg.style.transform = `scale(${currentScale})`;
        }
    });
}

function updateAllSvgZoom(zoomControls) {
    // 両方のコンテナのSVGを取得して同じスケールを適用
    const containers = ['#asd-graph-id', '#asd-graph-name'];
    
    containers.forEach(containerId => {
        const container = document.querySelector(containerId);
        if (!container) return;
        
        const svg = container.querySelector('svg');
        if (svg) {
            // transform-originはCSSで設定済み（top left）
            svg.style.transform = `scale(${currentScale})`;
        }
    });
    
    // ボタン状態の更新
    const zoomIn = zoomControls.querySelector('[data-zoom="in"]');
    const zoomOut = zoomControls.querySelector('[data-zoom="out"]');
    
    zoomIn.disabled = currentScale >= maxScale;
    zoomOut.disabled = currentScale <= minScale;
}</script>
</head>
<body>
    <div class="markdown-body">
        <h1>ALPS Book Store</h1>

<p>ALPS profile for managing an online bookstore catalog and defining the user purchase flow. This profile provides semantic definitions for both RESTful APIs and UI.</p>

<!-- Container for the ASDs -->

<div id="svg-container">
    <div id="asd-graph-id" style="text-align: center; "></div>
    <div id="asd-graph-name" style="text-align: center; display: none;"></div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', async function() {
        try {
            await Promise.all([
                    renderGraph("#asd-graph-id", 'digraph application_state_diagram {  graph [    labelloc="t";    fontname="Helvetica"  ];  node [shape = box, style = "bold,filled" fillcolor="lightgray", margin="0.3,0.1"];    Book [margin=0.1, label="Book", shape=box, URL="#Book" target="_parent"]    Catalog [margin=0.1, label="Catalog", shape=box, URL="#Catalog" target="_parent"]    Payment [margin=0.1, label="Payment", shape=box, URL="#Payment" target="_parent"]    Book -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCatalog" tooltip="Go to Catalog Screen (safe)"><font color="#00A86B">■</font> goToCatalog</td></tr></table>> URL="#goToCatalog" target="_parent" fontsize=13 class="goToCatalog" penwidth=1.5];    Book -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#doAddToCart" tooltip="Add to Cart (unsafe)"><font color="#FF4136">■</font> doAddToCart</td></tr></table>> URL="#doAddToCart" target="_parent" fontsize=13 class="doAddToCart" penwidth=1.5];    Catalog -> Book [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToBookDetails" tooltip="Go to Book Details Screen (safe)"><font color="#00A86B">■</font> goToBookDetails</td></tr></table>> URL="#goToBookDetails" target="_parent" fontsize=13 class="goToBookDetails" penwidth=1.5];    Catalog -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#goGetCategories" tooltip="Get Category List (safe)"><font color="#00A86B">■</font> goGetCategories</td></tr><tr><td valign="middle" align="left" href="#goListBooks" tooltip="Get Book List (safe)"><font color="#00A86B">■</font> goListBooks</td></tr><tr><td valign="middle" align="left" href="#goSearchBooks" tooltip="Search Books (safe)"><font color="#00A86B">■</font> goSearchBooks</td></tr></table>> URL="#goGetCategories" target="_parent" fontsize=13 class="goGetCategories" penwidth=1.5];    Catalog -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> goToCart</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    Checkout -> Checkout [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#doShippingInfo" tooltip="Input Shipping Information (unsafe)"><font color="#FF4136">■</font> doShippingInfo</td></tr><tr><td valign="middle" align="left" href="#doUserInfo" tooltip="Input User Information (unsafe)"><font color="#FF4136">■</font> doUserInfo</td></tr></table>> URL="#doShippingInfo" target="_parent" fontsize=13 class="doShippingInfo" penwidth=1.5];    Checkout -> Payment [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToPayment" tooltip="Go to Payment Screen (safe)"><font color="#00A86B">■</font> goToPayment</td></tr></table>> URL="#goToPayment" target="_parent" fontsize=13 class="goToPayment" penwidth=1.5];    Checkout -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> goToCart</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    Home -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCatalog" tooltip="Go to Catalog Screen (safe)"><font color="#00A86B">■</font> goToCatalog</td></tr></table>> URL="#goToCatalog" target="_parent" fontsize=13 class="goToCatalog" penwidth=1.5];    Home -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> goToCart</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    Payment -> Home [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToHome" tooltip="Go to Home Screen (safe)"><font color="#00A86B">■</font> goToHome</td></tr></table>> URL="#goToHome" target="_parent" fontsize=13 class="goToHome" penwidth=1.5];    Payment -> Payment [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#doPaymentInfo" tooltip="Input Payment Information (unsafe)"><font color="#FF4136">■</font> doPaymentInfo</td></tr><tr><td valign="middle" align="left" href="#doPlaceOrder" tooltip="Place Order (unsafe)"><font color="#FF4136">■</font> doPlaceOrder</td></tr><tr><td valign="middle" align="left" href="#goOrderDetails" tooltip="Display Order Details (safe)"><font color="#00A86B">■</font> goOrderDetails</td></tr></table>> URL="#doPaymentInfo" target="_parent" fontsize=13 class="doPaymentInfo" penwidth=1.5];    Payment -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> goToCart</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    ShoppingCart -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCatalog" tooltip="Go to Catalog Screen (safe)"><font color="#00A86B">■</font> goToCatalog</td></tr></table>> URL="#goToCatalog" target="_parent" fontsize=13 class="goToCatalog" penwidth=1.5];    ShoppingCart -> Checkout [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCheckout" tooltip="Go to Checkout Screen (safe)"><font color="#00A86B">■</font> goToCheckout</td></tr></table>> URL="#goToCheckout" target="_parent" fontsize=13 class="goToCheckout" penwidth=1.5];    ShoppingCart -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#doRemoveFromCart" tooltip="Remove Item from Cart (idempotent)"><font color="#FFDC00">■</font> doRemoveFromCart</td></tr><tr><td valign="middle" align="left" href="#doUpdateQuantity" tooltip="Update Cart Item Quantity (idempotent)"><font color="#FFDC00">■</font> doUpdateQuantity</td></tr><tr><td valign="middle" align="left" href="#goListCartItems" tooltip="Get Cart Items List (safe)"><font color="#00A86B">■</font> goListCartItems</td></tr></table>> URL="#doRemoveFromCart" target="_parent" fontsize=13 class="doRemoveFromCart" penwidth=1.5];    Book [label="Book" URL="#Book" target="_parent"]    Catalog [label="Catalog" URL="#Catalog" target="_parent"]    ShoppingCart [label="ShoppingCart" URL="#ShoppingCart" target="_parent"]    Checkout [label="Checkout" URL="#Checkout" target="_parent"]    Payment [label="Payment" URL="#Payment" target="_parent"]    Home [label="Home" URL="#Home" target="_parent"]}'),
                    renderGraph("#asd-graph-name", 'digraph application_state_diagram {  graph [    labelloc="t";    fontname="Helvetica"  ];  node [shape = box, style = "bold,filled" fillcolor="lightgray", margin="0.3,0.1"];    Book [margin=0.1, label="Book", shape=box, URL="#Book" target="_parent"]    Catalog [margin=0.1, label="Book Catalog", shape=box, URL="#Catalog" target="_parent"]    Payment [margin=0.1, label="Payment Screen", shape=box, URL="#Payment" target="_parent"]    Book -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCatalog" tooltip="Go to Catalog Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Catalog&nbsp;Screen</td></tr></table>> URL="#goToCatalog" target="_parent" fontsize=13 class="goToCatalog" penwidth=1.5];    Book -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#doAddToCart" tooltip="Add to Cart (unsafe)"><font color="#FF4136">■</font> Add&nbsp;to&nbsp;Cart</td></tr></table>> URL="#doAddToCart" target="_parent" fontsize=13 class="doAddToCart" penwidth=1.5];    Catalog -> Book [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToBookDetails" tooltip="Go to Book Details Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Book&nbsp;Details&nbsp;Screen</td></tr></table>> URL="#goToBookDetails" target="_parent" fontsize=13 class="goToBookDetails" penwidth=1.5];    Catalog -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#goGetCategories" tooltip="Get Category List (safe)"><font color="#00A86B">■</font> Get&nbsp;Category&nbsp;List</td></tr><tr><td valign="middle" align="left" href="#goListBooks" tooltip="Get Book List (safe)"><font color="#00A86B">■</font> Get&nbsp;Book&nbsp;List</td></tr><tr><td valign="middle" align="left" href="#goSearchBooks" tooltip="Search Books (safe)"><font color="#00A86B">■</font> Search&nbsp;Books</td></tr></table>> URL="#goGetCategories" target="_parent" fontsize=13 class="goGetCategories" penwidth=1.5];    Catalog -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Cart&nbsp;Screen</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    Checkout -> Checkout [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#doShippingInfo" tooltip="Input Shipping Information (unsafe)"><font color="#FF4136">■</font> Input&nbsp;Shipping&nbsp;Information</td></tr><tr><td valign="middle" align="left" href="#doUserInfo" tooltip="Input User Information (unsafe)"><font color="#FF4136">■</font> Input&nbsp;User&nbsp;Information</td></tr></table>> URL="#doShippingInfo" target="_parent" fontsize=13 class="doShippingInfo" penwidth=1.5];    Checkout -> Payment [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToPayment" tooltip="Go to Payment Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Payment&nbsp;Screen</td></tr></table>> URL="#goToPayment" target="_parent" fontsize=13 class="goToPayment" penwidth=1.5];    Checkout -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Cart&nbsp;Screen</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    Home -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCatalog" tooltip="Go to Catalog Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Catalog&nbsp;Screen</td></tr></table>> URL="#goToCatalog" target="_parent" fontsize=13 class="goToCatalog" penwidth=1.5];    Home -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Cart&nbsp;Screen</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    Payment -> Home [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToHome" tooltip="Go to Home Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Home&nbsp;Screen</td></tr></table>> URL="#goToHome" target="_parent" fontsize=13 class="goToHome" penwidth=1.5];    Payment -> Payment [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#doPaymentInfo" tooltip="Input Payment Information (unsafe)"><font color="#FF4136">■</font> Input&nbsp;Payment&nbsp;Information</td></tr><tr><td valign="middle" align="left" href="#doPlaceOrder" tooltip="Place Order (unsafe)"><font color="#FF4136">■</font> Place&nbsp;Order</td></tr><tr><td valign="middle" align="left" href="#goOrderDetails" tooltip="Display Order Details (safe)"><font color="#00A86B">■</font> Display&nbsp;Order&nbsp;Details</td></tr></table>> URL="#doPaymentInfo" target="_parent" fontsize=13 class="doPaymentInfo" penwidth=1.5];    Payment -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCart" tooltip="Go to Cart Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Cart&nbsp;Screen</td></tr></table>> URL="#goToCart" target="_parent" fontsize=13 class="goToCart" penwidth=1.5];    ShoppingCart -> Catalog [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCatalog" tooltip="Go to Catalog Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Catalog&nbsp;Screen</td></tr></table>> URL="#goToCatalog" target="_parent" fontsize=13 class="goToCatalog" penwidth=1.5];    ShoppingCart -> Checkout [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" href="#goToCheckout" tooltip="Go to Checkout Screen (safe)"><font color="#00A86B">■</font> Go&nbsp;to&nbsp;Checkout&nbsp;Screen</td></tr></table>> URL="#goToCheckout" target="_parent" fontsize=13 class="goToCheckout" penwidth=1.5];    ShoppingCart -> ShoppingCart [label=<<table border="0" cellborder="0" cellspacing="0" cellpadding="0"><tr><td valign="middle" align="left" href="#doRemoveFromCart" tooltip="Remove Item from Cart (idempotent)"><font color="#FFDC00">■</font> Remove&nbsp;Item&nbsp;from&nbsp;Cart</td></tr><tr><td valign="middle" align="left" href="#doUpdateQuantity" tooltip="Update Cart Item Quantity (idempotent)"><font color="#FFDC00">■</font> Update&nbsp;Cart&nbsp;Item&nbsp;Quantity</td></tr><tr><td valign="middle" align="left" href="#goListCartItems" tooltip="Get Cart Items List (safe)"><font color="#00A86B">■</font> Get&nbsp;Cart&nbsp;Items&nbsp;List</td></tr></table>> URL="#doRemoveFromCart" target="_parent" fontsize=13 class="doRemoveFromCart" penwidth=1.5];    Book [label="Book" URL="#Book" target="_parent"]    Catalog [label="Book Catalog" URL="#Catalog" target="_parent"]    ShoppingCart [label="Shopping Cart" URL="#ShoppingCart" target="_parent"]    Checkout [label="Checkout Screen" URL="#Checkout" target="_parent"]    Payment [label="Payment Screen" URL="#Payment" target="_parent"]    Home [label="Home Screen" URL="#Home" target="_parent"]}')
            ]);
            setupTagTrigger();
            setupModeSwitch('asd-show-id', 'asd-graph-id', 'asd-graph-name');
            setupModeSwitch('asd-show-name', 'asd-graph-name', 'asd-graph-id');
            applySmoothScrollToLinks(document.querySelectorAll('a[href^="#"]'));
            setupTagClick();
            setupDocClick();
            setupTagEventListener('cart', ['ShoppingCart', 'doAddToCart', 'doRemoveFromCart', 'doUpdateQuantity', 'goListCartItems'], 'LightGreen'); setupTagEventListener('catalog', ['Book', 'Catalog', 'Category', 'author', 'category', 'goGetBookDetails', 'goGetCategories', 'goListBooks', 'goSearchBooks', 'isbn', 'query', 'title'], 'SkyBlue'); setupTagEventListener('checkout', ['Checkout'], 'LightCoral'); setupTagEventListener('commerce', ['price', 'quantity', 'totalAmount'], 'LightSalmon'); setupTagEventListener('core', ['id'], 'Khaki'); setupTagEventListener('customer', ['doUserInfo', 'userEmail', 'userName'], 'Plum'); setupTagEventListener('navigation', ['Home'], 'Wheat'); setupTagEventListener('order', ['doPlaceOrder', 'goOrderDetails'], 'LightGreen'); setupTagEventListener('payment', ['Payment', 'doPaymentInfo', 'paymentMethod'], 'SkyBlue'); setupTagEventListener('shipping', ['doShippingInfo', 'shippingAddress'], 'LightCoral'); 

            // Initialize new features
            enhanceProfileSection();
            setupSearch();
            setupGraphZoom();
        } catch (error) {
               console.error("Error in main process:", error);
        }});
</script>

<div id="zoom-controls-container" style="margin-bottom: 10px;"></div>

<div class="asd-view-selector">
    <span class="selector-label">View:</span>
    <input type="radio" id="asd-show-id" checked name="asd-view-selector">
    <label for="asd-show-id">id</label>
    <input type="radio" id="asd-show-name" name="asd-view-selector">
    <label for="asd-show-name">title</label>
</div>

<div class="selector-container"><span class="selector-label">Tags:</span>
<span class="selector-option"><input type="checkbox" id="tag-cart" class="tag-trigger-checkbox" data-tag="cart" name="tag-cart"><label for="tag-cart"> cart</label></span>
<span class="selector-option"><input type="checkbox" id="tag-catalog" class="tag-trigger-checkbox" data-tag="catalog" name="tag-catalog"><label for="tag-catalog"> catalog</label></span>
<span class="selector-option"><input type="checkbox" id="tag-checkout" class="tag-trigger-checkbox" data-tag="checkout" name="tag-checkout"><label for="tag-checkout"> checkout</label></span>
<span class="selector-option"><input type="checkbox" id="tag-commerce" class="tag-trigger-checkbox" data-tag="commerce" name="tag-commerce"><label for="tag-commerce"> commerce</label></span>
<span class="selector-option"><input type="checkbox" id="tag-core" class="tag-trigger-checkbox" data-tag="core" name="tag-core"><label for="tag-core"> core</label></span>
<span class="selector-option"><input type="checkbox" id="tag-customer" class="tag-trigger-checkbox" data-tag="customer" name="tag-customer"><label for="tag-customer"> customer</label></span>
<span class="selector-option"><input type="checkbox" id="tag-navigation" class="tag-trigger-checkbox" data-tag="navigation" name="tag-navigation"><label for="tag-navigation"> navigation</label></span>
<span class="selector-option"><input type="checkbox" id="tag-order" class="tag-trigger-checkbox" data-tag="order" name="tag-order"><label for="tag-order"> order</label></span>
<span class="selector-option"><input type="checkbox" id="tag-payment" class="tag-trigger-checkbox" data-tag="payment" name="tag-payment"><label for="tag-payment"> payment</label></span>
<span class="selector-option"><input type="checkbox" id="tag-shipping" class="tag-trigger-checkbox" data-tag="shipping" name="tag-shipping"><label for="tag-shipping"> shipping</label></span></div>

<div class="legend">
    <div class="legend-item" title="A state element (e.g.  HTML.SPAN, HTML.INPUT, etc.).">
        <span class="legend-icon semantic"></span>
        Semantic
    </div>
    <div class="legend-item" title="A hypermedia control that triggers a safe, idempotent state
      transition (e.g.  HTTP.GET or HTTP.HEAD).">
        <span class="legend-icon safe"></span>
        Safe
    </div>
    <div class="legend-item" title="A hypermedia control that triggers an unsafe, non-
      idempotent state transition (e.g.  HTTP.POST).">
        <span class="legend-icon unsafe"></span>
        Unsafe
    </div>
    <div class="legend-item" title="A hypermedia control that triggers an unsafe,
      idempotent state transition (e.g.  HTTP.PUT or HTTP.DELETE).">
        <span class="legend-icon idempotent"></span>
        Idempotent
    </div>
</div>

<h2>Semantic Descriptors</h2>

<table>
<thead>
<tr>
  <th align="center">Type</th>
  <th align="left">ID</th>
  <th align="left">Title</th>
  <th align="left">Contained</th>
  <th align="left">Extra Info</th>
</tr>
</thead>
<tbody>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="author"></a><a href="#author">author</a></td>
  <td align="left"><span style="white-space: normal;">Author</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/author" target="_blank">schema.org/author</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Name of the book&#039;s author. For multiple authors, names are comma-separated.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Book"></a><a href="#Book">Book</a></td>
  <td align="left"><span style="white-space: normal;">Book</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#title">title</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#author">author</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#isbn">isbn</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#price">price</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#category">category</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doAddToCart">doAddToCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/Book" target="_blank">schema.org/Book</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen." title="Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.">Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Catalog"></a><a href="#Catalog">Catalog</a></td>
  <td align="left"><span style="white-space: normal;">Book Catalog</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#Book">Book</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goListBooks">goListBooks</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goSearchBooks">goSearchBooks</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goGetCategories">goGetCategories</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToBookDetails">goToBookDetails</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/CollectionPage" target="_blank">schema.org/CollectionPage</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions." title="Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.">Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Category"></a><a href="#Category">Category</a></td>
  <td align="left"><span style="white-space: normal;">Category</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#title">title</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/Category" target="_blank">schema.org/Category</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Book genre classification. May have a hierarchical structure with parent and child categories.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="category"></a><a href="#category">category</a></td>
  <td align="left"><span style="white-space: normal;">Category</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/category" target="_blank">schema.org/category</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Genre or category of the book. Books may belong to multiple categories.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Checkout"></a><a href="#Checkout">Checkout</a></td>
  <td align="left"><span style="white-space: normal;">Checkout Screen</span></td>
  <td align="left"><span class="type-indicator-small safe" title="Safe"></span><a href="#goToPayment">goToPayment</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doUserInfo">doUserInfo</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doShippingInfo">doShippingInfo</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-checkout">checkout</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed." title="Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.">Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doAddToCart"></a><a href="#doAddToCart">doAddToCart</a></td>
  <td align="left"><span style="white-space: normal;">Add to Cart</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#quantity">quantity</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#ShoppingCart">ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Add the specified book to the shopping cart. If already in the cart, quantity is increased. Orders exceeding stock will result in an error.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doPaymentInfo"></a><a href="#doPaymentInfo">doPaymentInfo</a></td>
  <td align="left"><span style="white-space: normal;">Input Payment Information</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#paymentMethod">paymentMethod</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-payment">payment</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Payment">Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Select order payment method and input necessary payment information. When credit card is selected, card information is input and validated.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doPlaceOrder"></a><a href="#doPlaceOrder">doPlaceOrder</a></td>
  <td align="left"><span style="white-space: normal;">Place Order</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-order">order</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Payment">Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed." title="Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed.">Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon idempotent"></span></span></td>
  <td align="left"><a id="doRemoveFromCart"></a><a href="#doRemoveFromCart">doRemoveFromCart</a></td>
  <td align="left"><span style="white-space: normal;">Remove Item from Cart</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#ShoppingCart">ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Completely remove the specified item from the cart. If the item does not exist in the cart, no changes are made.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doShippingInfo"></a><a href="#doShippingInfo">doShippingInfo</a></td>
  <td align="left"><span style="white-space: normal;">Input Shipping Information</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#shippingAddress">shippingAddress</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-shipping">shipping</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Checkout">Checkout</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Input product delivery address. Features automatic address input using postal code lookup.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon idempotent"></span></span></td>
  <td align="left"><a id="doUpdateQuantity"></a><a href="#doUpdateQuantity">doUpdateQuantity</a></td>
  <td align="left"><span style="white-space: normal;">Update Cart Item Quantity</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#quantity">quantity</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#ShoppingCart">ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error." title="Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.">Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doUserInfo"></a><a href="#doUserInfo">doUserInfo</a></td>
  <td align="left"><span style="white-space: normal;">Input User Information</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#userName">userName</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#userEmail">userEmail</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-customer">customer</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Checkout">Checkout</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Input customer&#039;s name and email address. Email address is validated using regular expressions.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goGetBookDetails"></a><a href="#goGetBookDetails">goGetBookDetails</a></td>
  <td align="left"><span style="white-space: normal;">Get Book Details</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">item</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Book">Book</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve detailed information for a specific book based on the specified book ID. Includes stock status and related book information.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goGetCategories"></a><a href="#goGetCategories">goGetCategories</a></td>
  <td align="left"><span style="white-space: normal;">Get Category List</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Catalog">Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve list of all available book categories. For hierarchical categories, parent-child relationships are also returned.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goListBooks"></a><a href="#goListBooks">goListBooks</a></td>
  <td align="left"><span style="white-space: normal;">Get Book List</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Catalog">Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve list of all books in the catalog. Can specify pagination (default 20 items/page) and sort order (newest, price, popularity, etc.).</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goListCartItems"></a><a href="#goListCartItems">goListCartItems</a></td>
  <td align="left"><span style="white-space: normal;">Get Cart Items List</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#ShoppingCart">ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve all products in the current shopping cart, including their quantities, subtotals, and total amount.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goOrderDetails"></a><a href="#goOrderDetails">goOrderDetails</a></td>
  <td align="left"><span style="white-space: normal;">Display Order Details</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-order">order</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Payment">Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc." title="Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc.">Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goSearchBooks"></a><a href="#goSearchBooks">goSearchBooks</a></td>
  <td align="left"><span style="white-space: normal;">Search Books</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#query">query</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Catalog">Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc." title="Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.">Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToBookDetails"></a><a href="#goToBookDetails">goToBookDetails</a></td>
  <td align="left"><span style="white-space: normal;">Go to Book Details Screen</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Book">Book</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the detailed information screen for the selected book. Book ID must be specified.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCart"></a><a href="#goToCart">goToCart</a></td>
  <td align="left"><span style="white-space: normal;">Go to Cart Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#ShoppingCart">ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the screen displaying the contents of the current shopping cart.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCatalog"></a><a href="#goToCatalog">goToCatalog</a></td>
  <td align="left"><span style="white-space: normal;">Go to Catalog Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Catalog">Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the book catalog list screen. All books are displayed.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCheckout"></a><a href="#goToCheckout">goToCheckout</a></td>
  <td align="left"><span style="white-space: normal;">Go to Checkout Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Checkout">Checkout</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the screen to confirm cart contents and proceed with purchase. Cannot transition if cart is empty.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToHome"></a><a href="#goToHome">goToHome</a></td>
  <td align="left"><span style="white-space: normal;">Go to Home Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Home">Home</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the application&#039;s home screen. Accessible from any screen.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToPayment"></a><a href="#goToPayment">goToPayment</a></td>
  <td align="left"><span style="white-space: normal;">Go to Payment Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="#Payment">Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the payment screen to input payment information and complete the order.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Home"></a><a href="#Home">Home</a></td>
  <td align="left"><span style="white-space: normal;">Home Screen</span></td>
  <td align="left"><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-navigation">navigation</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Starting point of the application. Displays site-wide navigation and promotional information.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="id"></a><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;">Identifier</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/identifier" target="_blank">schema.org/identifier</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-core">core</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Unique identifier for each resource. UUID or auto-generated integer.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="isbn"></a><a href="#isbn">isbn</a></td>
  <td align="left"><span style="white-space: normal;">ISBN</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/isbn" target="_blank">schema.org/isbn</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">International Standard Book Number. Formatted as ISBN-13 with hyphens.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Payment"></a><a href="#Payment">Payment</a></td>
  <td align="left"><span style="white-space: normal;">Payment Screen</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#paymentMethod">paymentMethod</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goOrderDetails">goOrderDetails</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToHome">goToHome</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doPaymentInfo">doPaymentInfo</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doPlaceOrder">doPlaceOrder</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-payment">payment</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically." title="Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.">Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="paymentMethod"></a><a href="#paymentMethod">paymentMethod</a></td>
  <td align="left"><span style="white-space: normal;">Payment Method</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/paymentMethod" target="_blank">schema.org/paymentMethod</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-payment">payment</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Method of payment for the order. Options include credit card, cash on delivery, bank transfer, etc.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="price"></a><a href="#price">price</a></td>
  <td align="left"><span style="white-space: normal;">Price</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/price" target="_blank">schema.org/price</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-commerce">commerce</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Sales price of the book. Pre-tax amount in JPY currency.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="quantity"></a><a href="#quantity">quantity</a></td>
  <td align="left"><span style="white-space: normal;">Quantity</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/quantityValue" target="_blank">schema.org/quantityValue</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-commerce">commerce</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Quantity of books in the cart. Integer value greater than or equal to 1.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="query"></a><a href="#query">query</a></td>
  <td align="left"><span style="white-space: normal;">Search Query</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Keywords or conditions used for book searches. Can search by title, author name, ISBN, etc.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="shippingAddress"></a><a href="#shippingAddress">shippingAddress</a></td>
  <td align="left"><span style="white-space: normal;">Shipping Address</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/address" target="_blank">schema.org/address</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-shipping">shipping</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Delivery address for products. Includes postal code, prefecture, city, street address, and building name.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="ShoppingCart"></a><a href="#ShoppingCart">ShoppingCart</a></td>
  <td align="left"><span style="white-space: normal;">Shopping Cart</span></td>
  <td align="left"><span class="type-indicator-small safe" title="Safe"></span><a href="#goListCartItems">goListCartItems</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCheckout">goToCheckout</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small idempotent" title="Idempotent"></span><a href="#doUpdateQuantity">doUpdateQuantity</a><br><span class="type-indicator-small idempotent" title="Idempotent"></span><a href="#doRemoveFromCart">doRemoveFromCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/ShoppingCart" target="_blank">schema.org/ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis." title="Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.">Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="title"></a><a href="#title">title</a></td>
  <td align="left"><span style="white-space: normal;">Title</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/name" target="_blank">schema.org/name</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Title of book or category name. String with a maximum of 200 characters.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="totalAmount"></a><a href="#totalAmount">totalAmount</a></td>
  <td align="left"><span style="white-space: normal;">Total Amount</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/totalPrice" target="_blank">schema.org/totalPrice</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-commerce">commerce</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Total amount for an order or cart contents. Displayed with tax included.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="userEmail"></a><a href="#userEmail">userEmail</a></td>
  <td align="left"><span style="white-space: normal;">Email Address</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/email" target="_blank">schema.org/email</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-customer">customer</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Customer&#039;s contact email address. Used for sending order confirmation emails.</span></span></span></span></td>
</tr>
<tr>
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="userName"></a><a href="#userName">userName</a></td>
  <td align="left"><span style="white-space: normal;">User Name</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/name" target="_blank">schema.org/name</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-customer">customer</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Name of the customer. First and last name separated by a space.</span></span></span></span></td>
</tr>
</tbody>
</table>

<h2>Links</h2>

<ul>
<li><a rel="issue" href="https://github.com/example/online-bookstore-api/issues">issue</a></li>
</ul>

<hr />

<h2>Profile</h2>

<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;alps
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:noNamespaceSchemaLocation=&quot;https://alps-io.github.io/schemas/alps.xsd&quot;&gt;
    &lt;title&gt;ALPS Book Store&lt;/title&gt;
    &lt;doc&gt;ALPS profile for managing an online bookstore catalog and defining the user purchase flow. This profile provides semantic definitions for both RESTful APIs and UI.&lt;/doc&gt;
    &lt;link href=&quot;https://github.com/example/online-bookstore-api/issues&quot; rel=&quot;issue&quot;/&gt;

    &lt;!-- Ontology (既存の記述はそのまま、変更なし) --&gt;
    &lt;descriptor id=&quot;id&quot; def=&quot;https://schema.org/identifier&quot; title=&quot;Identifier&quot; tag=&quot;core&quot;&gt;
        &lt;doc&gt;Unique identifier for each resource. UUID or auto-generated integer.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;title&quot; def=&quot;https://schema.org/name&quot; title=&quot;Title&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Title of book or category name. String with a maximum of 200 characters.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;author&quot; def=&quot;https://schema.org/author&quot; title=&quot;Author&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Name of the book&#039;s author. For multiple authors, names are comma-separated.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;isbn&quot; def=&quot;https://schema.org/isbn&quot; title=&quot;ISBN&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;International Standard Book Number. Formatted as ISBN-13 with hyphens.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;price&quot; def=&quot;https://schema.org/price&quot; title=&quot;Price&quot; tag=&quot;commerce&quot;&gt;
        &lt;doc&gt;Sales price of the book. Pre-tax amount in JPY currency.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;category&quot; def=&quot;https://schema.org/category&quot; title=&quot;Category&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Genre or category of the book. Books may belong to multiple categories.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;quantity&quot; def=&quot;https://schema.org/quantityValue&quot; title=&quot;Quantity&quot; tag=&quot;commerce&quot;&gt;
        &lt;doc&gt;Quantity of books in the cart. Integer value greater than or equal to 1.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;totalAmount&quot; def=&quot;https://schema.org/totalPrice&quot; title=&quot;Total Amount&quot; tag=&quot;commerce&quot;&gt;
        &lt;doc&gt;Total amount for an order or cart contents. Displayed with tax included.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;userName&quot; def=&quot;https://schema.org/name&quot; title=&quot;User Name&quot; tag=&quot;customer&quot;&gt;
        &lt;doc&gt;Name of the customer. First and last name separated by a space.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;userEmail&quot; def=&quot;https://schema.org/email&quot; title=&quot;Email Address&quot; tag=&quot;customer&quot;&gt;
        &lt;doc&gt;Customer&#039;s contact email address. Used for sending order confirmation emails.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;shippingAddress&quot; def=&quot;https://schema.org/address&quot; title=&quot;Shipping Address&quot; tag=&quot;shipping&quot;&gt;
        &lt;doc&gt;Delivery address for products. Includes postal code, prefecture, city, street address, and building name.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;paymentMethod&quot; def=&quot;https://schema.org/paymentMethod&quot; title=&quot;Payment Method&quot; tag=&quot;payment&quot;&gt;
        &lt;doc&gt;Method of payment for the order. Options include credit card, cash on delivery, bank transfer, etc.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;query&quot; title=&quot;Search Query&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Keywords or conditions used for book searches. Can search by title, author name, ISBN, etc.&lt;/doc&gt;
    &lt;/descriptor&gt;

    &lt;!-- Taxonomy --&gt;
    &lt;descriptor id=&quot;Home&quot; title=&quot;Home Screen&quot; tag=&quot;navigation&quot;&gt;
        &lt;doc&gt;Starting point of the application. Displays site-wide navigation and promotional information.&lt;/doc&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Catalog&quot; def=&quot;https://schema.org/CollectionPage&quot; title=&quot;Book Catalog&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.&lt;/doc&gt;
        &lt;descriptor href=&quot;#goListBooks&quot;/&gt;
        &lt;descriptor href=&quot;#goSearchBooks&quot;/&gt;
        &lt;descriptor href=&quot;#goGetCategories&quot;/&gt;
        &lt;descriptor href=&quot;#goToBookDetails&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
        &lt;descriptor href=&quot;#Book&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Book&quot; def=&quot;https://schema.org/Book&quot; title=&quot;Book&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#title&quot;/&gt;
        &lt;descriptor href=&quot;#author&quot;/&gt;
        &lt;descriptor href=&quot;#isbn&quot;/&gt;
        &lt;descriptor href=&quot;#price&quot;/&gt;
        &lt;descriptor href=&quot;#category&quot;/&gt;
        &lt;descriptor href=&quot;#doAddToCart&quot;/&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Category&quot; def=&quot;https://schema.org/Category&quot; title=&quot;Category&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Book genre classification. May have a hierarchical structure with parent and child categories.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#title&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;ShoppingCart&quot; def=&quot;https://schema.org/ShoppingCart&quot; title=&quot;Shopping Cart&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.&lt;/doc&gt;
        &lt;descriptor href=&quot;#goListCartItems&quot;/&gt;
        &lt;descriptor href=&quot;#doUpdateQuantity&quot;/&gt;
        &lt;descriptor href=&quot;#doRemoveFromCart&quot;/&gt;
        &lt;descriptor href=&quot;#goToCheckout&quot;/&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Checkout&quot; title=&quot;Checkout Screen&quot; tag=&quot;checkout&quot;&gt;
        &lt;doc&gt;Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.&lt;/doc&gt;
        &lt;descriptor href=&quot;#doUserInfo&quot;/&gt;
        &lt;descriptor href=&quot;#doShippingInfo&quot;/&gt;
        &lt;descriptor href=&quot;#goToPayment&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Payment&quot; title=&quot;Payment Screen&quot; tag=&quot;payment&quot;&gt;
        &lt;doc&gt;Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.&lt;/doc&gt;
        &lt;descriptor href=&quot;#paymentMethod&quot;/&gt;
        &lt;descriptor href=&quot;#doPaymentInfo&quot;/&gt;
        &lt;descriptor href=&quot;#doPlaceOrder&quot;/&gt;
        &lt;descriptor href=&quot;#goOrderDetails&quot;/&gt;
        &lt;descriptor href=&quot;#goToHome&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;!-- Choreography --&gt;
    &lt;descriptor id=&quot;goToHome&quot; type=&quot;safe&quot; rt=&quot;#Home&quot; title=&quot;Go to Home Screen&quot;&gt;
        &lt;doc&gt;Navigate to the application&#039;s home screen. Accessible from any screen.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCatalog&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; title=&quot;Go to Catalog Screen&quot;&gt;
        &lt;doc&gt;Navigate to the book catalog list screen. All books are displayed.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToBookDetails&quot; type=&quot;safe&quot; rt=&quot;#Book&quot; title=&quot;Go to Book Details Screen&quot;&gt;
        &lt;doc&gt;Navigate to the detailed information screen for the selected book. Book ID must be specified.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCart&quot; type=&quot;safe&quot; rt=&quot;#ShoppingCart&quot; title=&quot;Go to Cart Screen&quot;&gt;
        &lt;doc&gt;Navigate to the screen displaying the contents of the current shopping cart.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCheckout&quot; type=&quot;safe&quot; rt=&quot;#Checkout&quot; title=&quot;Go to Checkout Screen&quot;&gt;
        &lt;doc&gt;Navigate to the screen to confirm cart contents and proceed with purchase. Cannot transition if cart is empty.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToPayment&quot; type=&quot;safe&quot; rt=&quot;#Payment&quot; title=&quot;Go to Payment Screen&quot;&gt;
        &lt;doc&gt;Navigate to the payment screen to input payment information and complete the order.&lt;/doc&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;goListBooks&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; rel=&quot;collection&quot; title=&quot;Get Book List&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Retrieve list of all books in the catalog. Can specify pagination (default 20 items/page) and sort order (newest, price, popularity, etc.).&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goSearchBooks&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; rel=&quot;collection&quot; title=&quot;Search Books&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.&lt;/doc&gt;
        &lt;descriptor href=&quot;#query&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goGetCategories&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; rel=&quot;collection&quot; title=&quot;Get Category List&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Retrieve list of all available book categories. For hierarchical categories, parent-child relationships are also returned.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goGetBookDetails&quot; type=&quot;safe&quot; rt=&quot;#Book&quot; rel=&quot;item&quot; title=&quot;Get Book Details&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Retrieve detailed information for a specific book based on the specified book ID. Includes stock status and related book information.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;doAddToCart&quot; type=&quot;unsafe&quot; rt=&quot;#ShoppingCart&quot; rel=&quot;collection&quot; title=&quot;Add to Cart&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Add the specified book to the shopping cart. If already in the cart, quantity is increased. Orders exceeding stock will result in an error.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#quantity&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goListCartItems&quot; type=&quot;safe&quot; rt=&quot;#ShoppingCart&quot; rel=&quot;collection&quot; title=&quot;Get Cart Items List&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Retrieve all products in the current shopping cart, including their quantities, subtotals, and total amount.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doUpdateQuantity&quot; type=&quot;idempotent&quot; rt=&quot;#ShoppingCart&quot; title=&quot;Update Cart Item Quantity&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#quantity&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doRemoveFromCart&quot; type=&quot;idempotent&quot; rt=&quot;#ShoppingCart&quot; title=&quot;Remove Item from Cart&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Completely remove the specified item from the cart. If the item does not exist in the cart, no changes are made.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;doUserInfo&quot; type=&quot;unsafe&quot; rt=&quot;#Checkout&quot; title=&quot;Input User Information&quot; tag=&quot;customer&quot;&gt;
        &lt;doc&gt;Input customer&#039;s name and email address. Email address is validated using regular expressions.&lt;/doc&gt;
        &lt;descriptor href=&quot;#userName&quot;/&gt;
        &lt;descriptor href=&quot;#userEmail&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doShippingInfo&quot; type=&quot;unsafe&quot; rt=&quot;#Checkout&quot; title=&quot;Input Shipping Information&quot; tag=&quot;shipping&quot;&gt;
        &lt;doc&gt;Input product delivery address. Features automatic address input using postal code lookup.&lt;/doc&gt;
        &lt;descriptor href=&quot;#shippingAddress&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doPaymentInfo&quot; type=&quot;unsafe&quot; rt=&quot;#Payment&quot; title=&quot;Input Payment Information&quot; tag=&quot;payment&quot;&gt;
        &lt;doc&gt;Select order payment method and input necessary payment information. When credit card is selected, card information is input and validated.&lt;/doc&gt;
        &lt;descriptor href=&quot;#paymentMethod&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doPlaceOrder&quot; type=&quot;unsafe&quot; rt=&quot;#Payment&quot; title=&quot;Place Order&quot; tag=&quot;order&quot;&gt;
        &lt;doc&gt;Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed.&lt;/doc&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;goOrderDetails&quot; type=&quot;safe&quot; rt=&quot;#Payment&quot; title=&quot;Display Order Details&quot; tag=&quot;order&quot;&gt;
        &lt;doc&gt;Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc.&lt;/doc&gt;
    &lt;/descriptor&gt;
&lt;/alps&gt;
</code></pre>

    </div>
</body>
</html>