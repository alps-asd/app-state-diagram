<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ALPS Book Store</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/3.0.1/github-markdown.min.css">
<style>
html{scroll-behavior:smooth;}
body{margin:0;padding:0;background:#fff;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;}
.markdown-body{background:#fff;padding:45px;max-width:none;margin:0 auto;overflow:visible;}
a{cursor:pointer;}
#svg-container{display:flex;overflow-x:scroll;margin:20px 0;}
#svg-graph{flex-shrink:0;text-align:center;}
#svg-graph svg{display:block;max-width:none;}
#svg-container.fit-width #svg-graph svg{max-width:100% !important;width:100% !important;height:auto !important;}
#svg-container.fit-width #svg-graph{flex-shrink:1;width:100%;}
#svg-container.half-size #svg-graph svg{max-width:60% !important;width:60% !important;height:auto !important;}
#svg-container.half-size #svg-graph{flex-shrink:0;}
h1,h2{margin-top:0;}
/* Legend */
.legend{display:flex;gap:20px;margin:20px 0;flex-wrap:wrap;}
table .legend{background-color:transparent;padding:0;margin:0;display:inline-flex;align-items:center;}
.legend-item{display:flex;align-items:center;font-size:14px;color:#333;}
.legend-icon{width:16px;height:16px;border:1px solid #000;margin-right:8px;}
.legend-icon.semantic{background-color:#FFFFFF;}
.legend-icon.safe{
    background-color:#00A86B;
    background-image:linear-gradient(45deg,#008000 25%,transparent 25%,transparent 75%,#008000 75%,#008000),linear-gradient(45deg,#008000 25%,transparent 25%,transparent 75%,#008000 75%,#008000);
    background-size:8px 8px;
    background-position:0 0,4px 4px;
}
.legend-icon.unsafe{
    background-color:#FF4136;
    background-image:repeating-linear-gradient(45deg,#FF4136,#FF4136 4px,#FF725C 4px,#FF725C 8px);
}
.legend-icon.idempotent{
    background-color:#D4A000;
    background-image:radial-gradient(#FFB700 20%,transparent 20%),radial-gradient(#FFB700 20%,transparent 20%);
    background-size:8px 8px;
    background-position:0 0,4px 4px;
}
/* Type indicator in table (small version) */
.type-indicator-small{display:inline-block;width:10px;height:10px;margin-right:4px;border:1px solid #000;vertical-align:middle;}
.type-indicator-small.semantic{background-color:#FFFFFF;}
.type-indicator-small.safe{
    background-color:#00A86B;
    background-image:linear-gradient(45deg,#008000 25%,transparent 25%,transparent 75%,#008000 75%,#008000),linear-gradient(45deg,#008000 25%,transparent 25%,transparent 75%,#008000 75%,#008000);
    background-size:6px 6px;
    background-position:0 0,3px 3px;
}
.type-indicator-small.unsafe{
    background-color:#FF4136;
    background-image:repeating-linear-gradient(45deg,#FF4136,#FF4136 3px,#FF725C 3px,#FF725C 6px);
}
.type-indicator-small.idempotent{
    background-color:#D4A000;
    background-image:radial-gradient(#FFB700 20%,transparent 20%),radial-gradient(#FFB700 20%,transparent 20%);
    background-size:6px 6px;
    background-position:0 0,3px 3px;
}
/* Table */
table{width:100%;border-collapse:collapse;margin:20px 0;}
th,td{padding:8px 12px;border:1px solid #ddd;text-align:left;vertical-align:top;}
th{background:#f6f8fa;font-weight:600;}
tr:hover{background-color:#f5f5f5;}
td a{color:#0366d6;text-decoration:none;}
td a:hover{text-decoration:underline;}
/* Selector container */
.selector-container{margin:15px 0;padding:10px;background:#f6f8fa;border-radius:5px;}
.selector-row{margin-bottom:8px;}
.selector-row:last-child{margin-bottom:0;}
.selector-label{font-weight:600;display:inline-block;width:48px;margin-right:8px;}
.selector-option{margin-right:15px;display:inline-block;cursor:pointer;}
.selector-option label{cursor:pointer;}
.tag-trigger-checkbox{margin-right:3px;}
/* Meta container for def, rt, tag */
.meta-container{display:flex;flex-direction:column;gap:4px;}
.meta-container br{display:none;}
.meta-item{display:flex;align-items:center;line-height:normal;}
.meta-label{font-size:0.85em;color:#777;width:45px;text-align:right;padding-right:10px;flex-shrink:0;}
.meta-values{display:inline-flex;flex-wrap:wrap;}
.meta-tag{display:inline-block;padding:3px 10px;border-radius:4px;font-size:0.8em;background-color:#f7f7f7;border:1px solid #e0e0e0;color:#3b71ca;margin:0 8px 4px 0;}
.def-tag{background-color:#EAF5FF;border-color:#B8DFFF;color:#0366D6;}
.rt-tag{background-color:#FFF5E6;border-color:#FFE1B3;color:#D97506;}
.tag-tag{background-color:#E6FFED;border-color:#C6EFC7;color:#22863A;}
.doc-tag{background-color:#FFFBEA;border-color:#FFE8A1;color:#8A6D1B;border:1px solid #FFE8A1;padding:3px 8px;font-size:0.8em;border-radius:4px;}
.doc-tag.clickable{cursor:pointer;}
.doc-tag.clickable:hover{background-color:#FFF3CC;}
</style>
<script>
// ALPS relationship data for parent-child highlighting
window.alpsRelationships = {"parentOf":{"goToCatalog":["Home","Book","Category","ShoppingCart"],"goToCart":["Home","Catalog","Checkout","Payment"],"goListBooks":["Catalog"],"goSearchBooks":["Catalog"],"goGetCategories":["Catalog"],"goToBookDetails":["Catalog","Category"],"goToCategory":["Catalog"],"Book":["Catalog"],"id":["Book","Category","goToBookDetails","goToCategory","doAddToCart","doUpdateQuantity","doRemoveFromCart"],"title":["Book","Category"],"author":["Book"],"isbn":["Book"],"price":["Book"],"category":["Book"],"doAddToCart":["Book"],"totalAmount":["ShoppingCart"],"goListCartItems":["ShoppingCart"],"doUpdateQuantity":["ShoppingCart"],"doRemoveFromCart":["ShoppingCart"],"goToCheckout":["ShoppingCart"],"doUserInfo":["Checkout"],"doShippingInfo":["Checkout"],"goToPayment":["Checkout"],"paymentMethod":["Payment","doPaymentInfo"],"doPaymentInfo":["Payment"],"doPlaceOrder":["Payment"],"goOrderDetails":["Payment"],"goToHome":["Payment"],"query":["goSearchBooks"],"quantity":["doAddToCart","doUpdateQuantity"],"userName":["doUserInfo"],"userEmail":["doUserInfo"],"shippingAddress":["doShippingInfo"]},"childrenOf":{"Home":["goToCatalog","goToCart"],"Catalog":["goListBooks","goSearchBooks","goGetCategories","goToBookDetails","goToCategory","goToCart","Book"],"Book":["id","title","author","isbn","price","category","doAddToCart","goToCatalog"],"Category":["id","title","goToCatalog","goToBookDetails"],"ShoppingCart":["totalAmount","goListCartItems","doUpdateQuantity","doRemoveFromCart","goToCheckout","goToCatalog"],"Checkout":["doUserInfo","doShippingInfo","goToPayment","goToCart"],"Payment":["paymentMethod","doPaymentInfo","doPlaceOrder","goOrderDetails","goToHome","goToCart"],"goToBookDetails":["id"],"goSearchBooks":["query"],"goToCategory":["id"],"doAddToCart":["id","quantity"],"doUpdateQuantity":["id","quantity"],"doRemoveFromCart":["id"],"doUserInfo":["userName","userEmail"],"doShippingInfo":["shippingAddress"],"doPaymentInfo":["paymentMethod"]}};

// Scroll to descriptor row and highlight it
function scrollToDescriptor(id) {
    const targetRow = document.getElementById('descriptor-' + id);
    if (targetRow) {
        targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
        targetRow.style.backgroundColor = '#ffffd0';
        setTimeout(() => {
            targetRow.style.backgroundColor = '';
        }, 2000);
    }
}

document.addEventListener('DOMContentLoaded', function() {
    // Add click handlers to all SVG elements with href="#something"
    const svgLinks = document.querySelectorAll('svg a[href^="#"], svg a[*|href^="#"]');

    svgLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();

            const href = this.getAttribute('href') || this.getAttributeNS('http://www.w3.org/1999/xlink', 'href');
            if (href && href.startsWith('#')) {
                const id = href.substring(1);
                scrollToDescriptor(id);
            }
        });
    });

    // Handle table internal links
    document.querySelectorAll('table a[href^="#"]').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            let href = this.getAttribute('href');
            while (href.startsWith('##')) {
                href = href.substring(1);
            }
            const id = href.substring(1);

            // Highlight SVG element for ID column links
            if (this.classList.contains('descriptor-id-link')) {
                setTimeout(() => {
                    highlightElementInSVG(id);
                    setTimeout(() => fadeOutHighlightsInSVG(), 2000);
                }, 100);
            }

            // Scroll to target row if different
            const currentRow = this.closest('tr');
            const targetRow = document.getElementById('descriptor-' + id);

            if (targetRow && targetRow !== currentRow) {
                targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
                targetRow.style.backgroundColor = '#ffffd0';
                setTimeout(() => {
                    targetRow.style.backgroundColor = '';
                }, 2000);
            }
        });
    });

    function highlightElementInSVG(text) {
        clearHighlightsInSVG();

        const svgElements = document.querySelectorAll('svg text, svg title');
        svgElements.forEach(element => {
            if (element.textContent && element.textContent.toLowerCase().includes(text.toLowerCase())) {
                let parentShape = element.closest('g');
                if (parentShape) {
                    parentShape.style.filter = 'drop-shadow(0 0 8px #ff6b35)';
                    parentShape.style.opacity = '0.8';
                    parentShape.classList.add('highlighted');
                }
            }
        });
    }

    function clearHighlightsInSVG() {
        const highlighted = document.querySelectorAll('.highlighted');
        highlighted.forEach(element => {
            element.style.transition = '';
            element.style.filter = '';
            element.style.opacity = '';
            element.classList.remove('highlighted');
        });
    }

    function fadeOutHighlightsInSVG() {
        const highlighted = document.querySelectorAll('.highlighted');
        highlighted.forEach(element => {
            element.style.transition = 'filter 0.5s ease-out, opacity 0.5s ease-out';
            element.style.filter = '';
            element.style.opacity = '';
        });
        setTimeout(() => {
            highlighted.forEach(element => {
                element.style.transition = '';
                element.classList.remove('highlighted');
            });
        }, 500);
    }
});
</script>
<script src="https://unpkg.com/viz.js@2.1.2/viz.js"></script>
<script src="https://unpkg.com/viz.js@2.1.2/lite.render.js"></script>
</head>
<body>
<div class="markdown-body">
<h1>ALPS Book Store</h1>
<p>ALPS profile for managing an online bookstore catalog and defining the user purchase flow. This profile provides semantic definitions for both RESTful APIs and UI.</p>
<div id="svg-container"><div id="svg-graph"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 14.1.0 (20251206.1807)
 -->
<!-- Title: application_state_diagram Pages: 1 -->
<svg width="809pt" height="570pt"
 viewBox="0.00 0.00 809.00 570.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 565.6)">
<title>application_state_diagram</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-565.6 804.61,-565.6 804.61,4 -4,4"/>
<!-- Home -->
<g id="node1" class="node">
<title>Home</title>
<g id="a_node1"><a xlink:href="#Home" xlink:title="Home">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="558.4,-561.6 504.4,-561.6 504.4,-525.6 558.4,-525.6 558.4,-561.6"/>
<text xml:space="preserve" text-anchor="middle" x="531.4" y="-539.4" font-family="Times,serif" font-size="14.00">Home</text>
</a>
</g>
</g>
<!-- Catalog -->
<g id="node2" class="node">
<title>Catalog</title>
<g id="a_node2"><a xlink:href="#Catalog" xlink:title="Catalog">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="214.37,-474 156.42,-474 156.42,-438 214.37,-438 214.37,-474"/>
<text xml:space="preserve" text-anchor="middle" x="185.4" y="-451.8" font-family="Times,serif" font-size="14.00">Catalog</text>
</a>
</g>
</g>
<!-- Home&#45;&gt;Catalog -->
<g id="edge2" class="edge goToCatalog">
<title>Home&#45;&gt;Catalog</title>
<g id="a_edge2"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M503.96,-535.81C443.37,-520.82 297.88,-484.83 226.41,-467.15"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="227.54,-463.82 216.99,-464.82 225.85,-470.62 227.54,-463.82"/>
</a>
</g>
<g id="a_edge2&#45;label"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<text xml:space="preserve" text-anchor="middle" x="423.32" y="-495.9" font-family="Times,serif" font-size="13.00">goToCatalog</text>
</a>
</g>
</g>
<!-- ShoppingCart -->
<g id="node5" class="node">
<title>ShoppingCart</title>
<g id="a_node5"><a xlink:href="#ShoppingCart" xlink:title="ShoppingCart">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="372.49,-211.2 280.31,-211.2 280.31,-175.2 372.49,-175.2 372.49,-211.2"/>
<text xml:space="preserve" text-anchor="middle" x="326.4" y="-189" font-family="Times,serif" font-size="14.00">ShoppingCart</text>
</a>
</g>
</g>
<!-- Home&#45;&gt;ShoppingCart -->
<g id="edge8" class="edge goToCart">
<title>Home&#45;&gt;ShoppingCart</title>
<g id="a_edge8"><a xlink:href="#goToCart" xlink:title="goToCart">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M531.4,-525.22C531.4,-507.93 531.4,-480.63 531.4,-457 531.4,-457 531.4,-457 531.4,-279.8 531.4,-215.93 445.62,-198.87 385.04,-194.79"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="385.36,-191.3 375.18,-194.25 384.97,-198.29 385.36,-191.3"/>
</a>
</g>
<g id="a_edge8&#45;label"><a xlink:href="#goToCart" xlink:title="goToCart">
<text xml:space="preserve" text-anchor="middle" x="556.31" y="-364.5" font-family="Times,serif" font-size="13.00">goToCart</text>
</a>
</g>
</g>
<!-- Catalog&#45;&gt;Catalog -->
<g id="edge14" class="edge goListBooks">
<title>Catalog&#45;&gt;Catalog</title>
<g id="a_edge14"><a xlink:href="#goListBooks" xlink:title="goListBooks">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M214.75,-458.74C224.54,-458.74 232.37,-457.83 232.37,-456 232.37,-455.06 230.29,-454.36 226.93,-453.9"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="227.19,-450.41 217.02,-453.38 226.82,-457.4 227.19,-450.41"/>
</a>
</g>
<g id="a_edge14&#45;label"><a xlink:href="#goListBooks" xlink:title="goListBooks">
<text xml:space="preserve" text-anchor="middle" x="265.6" y="-452.1" font-family="Times,serif" font-size="13.00">goListBooks</text>
</a>
</g>
</g>
<!-- Catalog&#45;&gt;Catalog -->
<g id="edge15" class="edge goSearchBooks">
<title>Catalog&#45;&gt;Catalog</title>
<g id="a_edge15"><a xlink:href="#goSearchBooks" xlink:title="goSearchBooks">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M214.74,-460.29C249.59,-462.78 298.82,-461.35 298.82,-456 298.82,-451.24 259.77,-449.58 226.61,-451.03"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="226.79,-447.52 217.01,-451.58 227.19,-454.51 226.79,-447.52"/>
</a>
</g>
<g id="a_edge15&#45;label"><a xlink:href="#goSearchBooks" xlink:title="goSearchBooks">
<text xml:space="preserve" text-anchor="middle" x="339.62" y="-452.1" font-family="Times,serif" font-size="13.00">goSearchBooks</text>
</a>
</g>
</g>
<!-- Catalog&#45;&gt;Catalog -->
<g id="edge16" class="edge goGetCategories">
<title>Catalog&#45;&gt;Catalog</title>
<g id="a_edge16"><a xlink:href="#goGetCategories" xlink:title="goGetCategories">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M214.48,-461.08C270.99,-466.55 380.42,-464.85 380.42,-456 380.42,-447.73 285.04,-445.71 226.39,-449.92"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="226.42,-446.41 216.74,-450.73 227,-453.38 226.42,-446.41"/>
</a>
</g>
<g id="a_edge16&#45;label"><a xlink:href="#goGetCategories" xlink:title="goGetCategories">
<text xml:space="preserve" text-anchor="middle" x="424.1" y="-452.1" font-family="Times,serif" font-size="13.00">goGetCategories</text>
</a>
</g>
</g>
<!-- Book -->
<g id="node3" class="node">
<title>Book</title>
<g id="a_node3"><a xlink:href="#Book" xlink:title="Book">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="204.4,-298.8 150.4,-298.8 150.4,-262.8 204.4,-262.8 204.4,-298.8"/>
<text xml:space="preserve" text-anchor="middle" x="177.4" y="-276.6" font-family="Times,serif" font-size="14.00">Book</text>
</a>
</g>
</g>
<!-- Catalog&#45;&gt;Book -->
<g id="edge6" class="edge goToBookDetails">
<title>Catalog&#45;&gt;Book</title>
<g id="a_edge6"><a xlink:href="#goToBookDetails" xlink:title="goToBookDetails">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M156.01,-455.04C111.84,-453.24 30.83,-442.14 5.96,-386.4 -0.56,-371.79 -3.01,-363.65 5.96,-350.4 35.36,-306.98 97.18,-291.04 137.99,-285.19"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="138.19,-288.69 147.67,-283.96 137.31,-281.75 138.19,-288.69"/>
</a>
</g>
<g id="a_edge6&#45;label"><a xlink:href="#goToBookDetails" xlink:title="goToBookDetails">
<text xml:space="preserve" text-anchor="middle" x="52.18" y="-364.5" font-family="Times,serif" font-size="13.00">goToBookDetails</text>
</a>
</g>
</g>
<!-- Category -->
<g id="node4" class="node">
<title>Category</title>
<g id="a_node4"><a xlink:href="#Category" xlink:title="Category">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="173.25,-386.4 107.54,-386.4 107.54,-350.4 173.25,-350.4 173.25,-386.4"/>
<text xml:space="preserve" text-anchor="middle" x="140.4" y="-364.2" font-family="Times,serif" font-size="14.00">Category</text>
</a>
</g>
</g>
<!-- Catalog&#45;&gt;Category -->
<g id="edge17" class="edge goToCategory">
<title>Catalog&#45;&gt;Category</title>
<g id="a_edge17"><a xlink:href="#goToCategory" xlink:title="goToCategory">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M155.99,-437.68C150.09,-432.75 144.68,-426.83 141.3,-420 138.1,-413.52 136.86,-405.98 136.66,-398.73"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="140.15,-399.07 137.07,-388.93 133.15,-398.78 140.15,-399.07"/>
</a>
</g>
<g id="a_edge17&#45;label"><a xlink:href="#goToCategory" xlink:title="goToCategory">
<text xml:space="preserve" text-anchor="middle" x="178.85" y="-408.3" font-family="Times,serif" font-size="13.00">goToCategory</text>
</a>
</g>
</g>
<!-- Catalog&#45;&gt;ShoppingCart -->
<g id="edge9" class="edge goToCart">
<title>Catalog&#45;&gt;ShoppingCart</title>
<g id="a_edge9"><a xlink:href="#goToCart" xlink:title="goToCart">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M214.5,-448.97C263.84,-436.92 361.83,-404.55 395.4,-332.4 413.79,-292.86 380.97,-247.79 354.58,-220.17"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="357.1,-217.73 347.57,-213.11 352.14,-222.67 357.1,-217.73"/>
</a>
</g>
<g id="a_edge9&#45;label"><a xlink:href="#goToCart" xlink:title="goToCart">
<text xml:space="preserve" text-anchor="middle" x="424.84" y="-320.7" font-family="Times,serif" font-size="13.00">goToCart</text>
</a>
</g>
</g>
<!-- Book&#45;&gt;Catalog -->
<g id="edge3" class="edge goToCatalog">
<title>Book&#45;&gt;Catalog</title>
<g id="a_edge3"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M203.15,-299.26C208.51,-304.24 213.43,-310.15 216.4,-316.8 235.09,-358.69 232.66,-377.11 216.4,-420 215.31,-422.86 213.88,-425.63 212.22,-428.28"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="209.6,-425.94 206.35,-436.02 215.18,-430.17 209.6,-425.94"/>
</a>
</g>
<g id="a_edge3&#45;label"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<text xml:space="preserve" text-anchor="middle" x="263.46" y="-364.5" font-family="Times,serif" font-size="13.00">goToCatalog</text>
</a>
</g>
</g>
<!-- Book&#45;&gt;ShoppingCart -->
<g id="edge18" class="edge doAddToCart">
<title>Book&#45;&gt;ShoppingCart</title>
<g id="a_edge18"><a xlink:href="#doAddToCart" xlink:title="doAddToCart">
<path fill="none" stroke="#ff4136" stroke-width="1.5" d="M195.84,-262.52C207.82,-251.93 224.14,-238.64 240.18,-229.2 249.19,-223.9 259.14,-219.05 268.99,-214.75"/>
<polygon fill="#ff4136" stroke="#ff4136" stroke-width="1.5" points="270.05,-218.1 277.92,-211.02 267.35,-211.64 270.05,-218.1"/>
</a>
</g>
<g id="a_edge18&#45;label"><a xlink:href="#doAddToCart" xlink:title="doAddToCart">
<text xml:space="preserve" text-anchor="middle" x="276.29" y="-233.1" font-family="Times,serif" font-size="13.00">doAddToCart</text>
</a>
</g>
</g>
<!-- Category&#45;&gt;Catalog -->
<g id="edge4" class="edge goToCatalog">
<title>Category&#45;&gt;Catalog</title>
<g id="a_edge4"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M107.09,-381.37C82.24,-390.47 52.27,-401.83 50.52,-404.4 46.61,-410.12 46.28,-414.52 50.52,-420 61.97,-434.81 108.87,-444.5 144.17,-449.85"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="143.45,-453.29 153.85,-451.24 144.45,-446.36 143.45,-453.29"/>
</a>
</g>
<g id="a_edge4&#45;label"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<text xml:space="preserve" text-anchor="middle" x="84.46" y="-408.3" font-family="Times,serif" font-size="13.00">goToCatalog</text>
</a>
</g>
</g>
<!-- Category&#45;&gt;Book -->
<g id="edge7" class="edge goToBookDetails">
<title>Category&#45;&gt;Book</title>
<g id="a_edge7"><a xlink:href="#goToBookDetails" xlink:title="goToBookDetails">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M127.96,-349.9C122.45,-339.85 118.34,-327.2 123.96,-316.8 127.66,-309.95 133.35,-304.22 139.67,-299.52"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="141.46,-302.53 147.98,-294.18 137.68,-296.64 141.46,-302.53"/>
</a>
</g>
<g id="a_edge7&#45;label"><a xlink:href="#goToBookDetails" xlink:title="goToBookDetails">
<text xml:space="preserve" text-anchor="middle" x="170.18" y="-320.7" font-family="Times,serif" font-size="13.00">goToBookDetails</text>
</a>
</g>
</g>
<!-- ShoppingCart&#45;&gt;Catalog -->
<g id="edge5" class="edge goToCatalog">
<title>ShoppingCart&#45;&gt;Catalog</title>
<g id="a_edge5"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M328.87,-211.58C333.05,-247.5 337.8,-331.2 301.4,-386.4 283.8,-413.08 251.96,-430.81 226.09,-441.56"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="224.85,-438.29 216.8,-445.18 227.39,-444.81 224.85,-438.29"/>
</a>
</g>
<g id="a_edge5&#45;label"><a xlink:href="#goToCatalog" xlink:title="goToCatalog">
<text xml:space="preserve" text-anchor="middle" x="360.98" y="-320.7" font-family="Times,serif" font-size="13.00">goToCatalog</text>
</a>
</g>
</g>
<!-- ShoppingCart&#45;&gt;ShoppingCart -->
<g id="edge19" class="edge goListCartItems">
<title>ShoppingCart&#45;&gt;ShoppingCart</title>
<g id="a_edge19"><a xlink:href="#goListCartItems" xlink:title="goListCartItems">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M372.77,-195.86C383.02,-195.61 390.49,-194.73 390.49,-193.2 390.49,-192.39 388.38,-191.76 384.87,-191.31"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="385.24,-187.83 375.04,-190.68 384.79,-194.81 385.24,-187.83"/>
</a>
</g>
<g id="a_edge19&#45;label"><a xlink:href="#goListCartItems" xlink:title="goListCartItems">
<text xml:space="preserve" text-anchor="middle" x="432.73" y="-189.3" font-family="Times,serif" font-size="13.00">goListCartItems</text>
</a>
</g>
</g>
<!-- ShoppingCart&#45;&gt;ShoppingCart -->
<g id="edge20" class="edge doUpdateQuantity">
<title>ShoppingCart&#45;&gt;ShoppingCart</title>
<g id="a_edge20"><a xlink:href="#doUpdateQuantity" xlink:title="doUpdateQuantity">
<path fill="none" stroke="#d4a000" stroke-width="1.5" d="M372.98,-197.91C417.68,-199.79 474.97,-198.22 474.97,-193.2 474.97,-188.62 427.31,-186.92 385.01,-188.08"/>
<polygon fill="#d4a000" stroke="#d4a000" stroke-width="1.5" points="385.12,-184.57 375.25,-188.42 385.36,-191.57 385.12,-184.57"/>
</a>
</g>
<g id="a_edge20&#45;label"><a xlink:href="#doUpdateQuantity" xlink:title="doUpdateQuantity">
<text xml:space="preserve" text-anchor="middle" x="522.99" y="-189.3" font-family="Times,serif" font-size="13.00">doUpdateQuantity</text>
</a>
</g>
</g>
<!-- ShoppingCart&#45;&gt;ShoppingCart -->
<g id="edge21" class="edge doRemoveFromCart">
<title>ShoppingCart&#45;&gt;ShoppingCart</title>
<g id="a_edge21"><a xlink:href="#doRemoveFromCart" xlink:title="doRemoveFromCart">
<path fill="none" stroke="#d4a000" stroke-width="1.5" d="M372.77,-199.01C445.59,-203.57 571.01,-201.64 571.01,-193.2 571.01,-185.21 458.47,-183.05 384.7,-186.72"/>
<polygon fill="#d4a000" stroke="#d4a000" stroke-width="1.5" points="384.82,-183.21 375.03,-187.26 385.21,-190.2 384.82,-183.21"/>
</a>
</g>
<g id="a_edge21&#45;label"><a xlink:href="#doRemoveFromCart" xlink:title="doRemoveFromCart">
<text xml:space="preserve" text-anchor="middle" x="624.44" y="-189.3" font-family="Times,serif" font-size="13.00">doRemoveFromCart</text>
</a>
</g>
</g>
<!-- Checkout -->
<g id="node6" class="node">
<title>Checkout</title>
<g id="a_node6"><a xlink:href="#Checkout" xlink:title="Checkout">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="448.42,-123.6 380.37,-123.6 380.37,-87.6 448.42,-87.6 448.42,-123.6"/>
<text xml:space="preserve" text-anchor="middle" x="414.4" y="-101.4" font-family="Times,serif" font-size="14.00">Checkout</text>
</a>
</g>
</g>
<!-- ShoppingCart&#45;&gt;Checkout -->
<g id="edge12" class="edge goToCheckout">
<title>ShoppingCart&#45;&gt;Checkout</title>
<g id="a_edge12"><a xlink:href="#goToCheckout" xlink:title="goToCheckout">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M371.69,-174.73C380.02,-169.99 388.07,-164.19 394.4,-157.2 400.04,-150.97 404.17,-142.96 407.17,-135.15"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="410.42,-136.48 410.19,-125.89 403.76,-134.32 410.42,-136.48"/>
</a>
</g>
<g id="a_edge12&#45;label"><a xlink:href="#goToCheckout" xlink:title="goToCheckout">
<text xml:space="preserve" text-anchor="middle" x="442.68" y="-145.5" font-family="Times,serif" font-size="13.00">goToCheckout</text>
</a>
</g>
</g>
<!-- Checkout&#45;&gt;ShoppingCart -->
<g id="edge10" class="edge goToCart">
<title>Checkout&#45;&gt;ShoppingCart</title>
<g id="a_edge10"><a xlink:href="#goToCart" xlink:title="goToCart">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M380.04,-117.65C367.46,-123.15 354.02,-130.95 344.57,-141.6 339.13,-147.74 335.28,-155.63 332.57,-163.35"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="329.23,-162.29 329.82,-172.87 335.96,-164.24 329.23,-162.29"/>
</a>
</g>
<g id="a_edge10&#45;label"><a xlink:href="#goToCart" xlink:title="goToCart">
<text xml:space="preserve" text-anchor="middle" x="369.48" y="-145.5" font-family="Times,serif" font-size="13.00">goToCart</text>
</a>
</g>
</g>
<!-- Checkout&#45;&gt;Checkout -->
<g id="edge22" class="edge doUserInfo">
<title>Checkout&#45;&gt;Checkout</title>
<g id="a_edge22"><a xlink:href="#doUserInfo" xlink:title="doUserInfo">
<path fill="none" stroke="#ff4136" stroke-width="1.5" d="M448.92,-109.69C458.8,-109.53 466.42,-108.17 466.42,-105.6 466.42,-104.28 464.4,-103.27 461.08,-102.59"/>
<polygon fill="#ff4136" stroke="#ff4136" stroke-width="1.5" points="461.45,-99.11 451.18,-101.71 460.83,-106.08 461.45,-99.11"/>
</a>
</g>
<g id="a_edge22&#45;label"><a xlink:href="#doUserInfo" xlink:title="doUserInfo">
<text xml:space="preserve" text-anchor="middle" x="496.03" y="-101.7" font-family="Times,serif" font-size="13.00">doUserInfo</text>
</a>
</g>
</g>
<!-- Checkout&#45;&gt;Checkout -->
<g id="edge23" class="edge doShippingInfo">
<title>Checkout&#45;&gt;Checkout</title>
<g id="a_edge23"><a xlink:href="#doShippingInfo" xlink:title="doShippingInfo">
<path fill="none" stroke="#ff4136" stroke-width="1.5" d="M448.83,-112.51C482.66,-115.56 525.63,-113.26 525.63,-105.6 525.63,-98.84 492.14,-96.25 461.02,-97.84"/>
<polygon fill="#ff4136" stroke="#ff4136" stroke-width="1.5" points="460.83,-94.34 451.09,-98.53 461.31,-101.33 460.83,-94.34"/>
</a>
</g>
<g id="a_edge23&#45;label"><a xlink:href="#doShippingInfo" xlink:title="doShippingInfo">
<text xml:space="preserve" text-anchor="middle" x="566.43" y="-101.7" font-family="Times,serif" font-size="13.00">doShippingInfo</text>
</a>
</g>
</g>
<!-- Payment -->
<g id="node7" class="node">
<title>Payment</title>
<g id="a_node7"><a xlink:href="#Payment" xlink:title="Payment">
<polygon fill="lightgray" stroke="black" stroke-width="2" points="446.09,-36 382.7,-36 382.7,0 446.09,0 446.09,-36"/>
<text xml:space="preserve" text-anchor="middle" x="414.4" y="-13.8" font-family="Times,serif" font-size="14.00">Payment</text>
</a>
</g>
</g>
<!-- Checkout&#45;&gt;Payment -->
<g id="edge13" class="edge goToPayment">
<title>Checkout&#45;&gt;Payment</title>
<g id="a_edge13"><a xlink:href="#goToPayment" xlink:title="goToPayment">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M414.4,-87.28C414.4,-76.14 414.4,-61.38 414.4,-48.44"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="417.9,-48.57 414.4,-38.57 410.9,-48.57 417.9,-48.57"/>
</a>
</g>
<g id="a_edge13&#45;label"><a xlink:href="#goToPayment" xlink:title="goToPayment">
<text xml:space="preserve" text-anchor="middle" x="450.86" y="-57.9" font-family="Times,serif" font-size="13.00">goToPayment</text>
</a>
</g>
</g>
<!-- Payment&#45;&gt;Home -->
<g id="edge1" class="edge goToHome">
<title>Payment&#45;&gt;Home</title>
<g id="a_edge1"><a xlink:href="#goToHome" xlink:title="goToHome">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M446.35,-20.57C528.63,-25.47 741.4,-44.01 741.4,-104.6 741.4,-457 741.4,-457 741.4,-457 741.4,-529.78 631.9,-542.08 571.04,-543.3"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="571.09,-539.8 561.12,-543.39 571.15,-546.8 571.09,-539.8"/>
</a>
</g>
<g id="a_edge1&#45;label"><a xlink:href="#goToHome" xlink:title="goToHome">
<text xml:space="preserve" text-anchor="middle" x="771" y="-276.9" font-family="Times,serif" font-size="13.00">goToHome</text>
</a>
</g>
</g>
<!-- Payment&#45;&gt;ShoppingCart -->
<g id="edge11" class="edge goToCart">
<title>Payment&#45;&gt;ShoppingCart</title>
<g id="a_edge11"><a xlink:href="#goToCart" xlink:title="goToCart">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M382.27,-33.06C360.78,-44.38 334.21,-62.55 321.57,-87.6 309.8,-110.94 312.77,-141.06 317.64,-162.98"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="314.24,-163.78 320.08,-172.62 321.02,-162.07 314.24,-163.78"/>
</a>
</g>
<g id="a_edge11&#45;label"><a xlink:href="#goToCart" xlink:title="goToCart">
<text xml:space="preserve" text-anchor="middle" x="346.48" y="-101.7" font-family="Times,serif" font-size="13.00">goToCart</text>
</a>
</g>
</g>
<!-- Payment&#45;&gt;Payment -->
<g id="edge24" class="edge doPaymentInfo">
<title>Payment&#45;&gt;Payment</title>
<g id="a_edge24"><a xlink:href="#doPaymentInfo" xlink:title="doPaymentInfo">
<path fill="none" stroke="#ff4136" stroke-width="1.5" d="M446.42,-20.73C456.32,-20.68 464.09,-19.77 464.09,-18 464.09,-17.09 462.03,-16.4 458.67,-15.95"/>
<polygon fill="#ff4136" stroke="#ff4136" stroke-width="1.5" points="458.87,-12.45 448.69,-15.39 458.48,-19.44 458.87,-12.45"/>
</a>
</g>
<g id="a_edge24&#45;label"><a xlink:href="#doPaymentInfo" xlink:title="doPaymentInfo">
<text xml:space="preserve" text-anchor="middle" x="504.17" y="-14.1" font-family="Times,serif" font-size="13.00">doPaymentInfo</text>
</a>
</g>
</g>
<!-- Payment&#45;&gt;Payment -->
<g id="edge25" class="edge doPlaceOrder">
<title>Payment&#45;&gt;Payment</title>
<g id="a_edge25"><a xlink:href="#doPlaceOrder" xlink:title="doPlaceOrder">
<path fill="none" stroke="#ff4136" stroke-width="1.5" d="M446.4,-22.25C486.08,-24.79 544.24,-23.38 544.24,-18 544.24,-13.15 496.88,-11.52 458.48,-13.12"/>
<polygon fill="#ff4136" stroke="#ff4136" stroke-width="1.5" points="458.47,-9.61 448.66,-13.63 458.83,-16.6 458.47,-9.61"/>
</a>
</g>
<g id="a_edge25&#45;label"><a xlink:href="#doPlaceOrder" xlink:title="doPlaceOrder">
<text xml:space="preserve" text-anchor="middle" x="579.98" y="-14.1" font-family="Times,serif" font-size="13.00">doPlaceOrder</text>
</a>
</g>
</g>
<!-- Payment&#45;&gt;Payment -->
<g id="edge26" class="edge goOrderDetails">
<title>Payment&#45;&gt;Payment</title>
<g id="a_edge26"><a xlink:href="#goOrderDetails" xlink:title="goOrderDetails">
<path fill="none" stroke="#00a86b" stroke-width="1.5" d="M446.56,-23.28C505.48,-28.51 615.71,-26.75 615.71,-18 615.71,-9.82 519.23,-7.75 458.55,-11.8"/>
<polygon fill="#00a86b" stroke="#00a86b" stroke-width="1.5" points="458.53,-8.29 448.82,-12.55 459.06,-15.27 458.53,-8.29"/>
</a>
</g>
<g id="a_edge26&#45;label"><a xlink:href="#goOrderDetails" xlink:title="goOrderDetails">
<text xml:space="preserve" text-anchor="middle" x="655.78" y="-14.1" font-family="Times,serif" font-size="13.00">goOrderDetails</text>
</a>
</g>
</g>
</g>
</svg>
</div></div>
<div class="selector-container">
    <div class="selector-row">
        <span class="selector-label">Label:</span>
        <span class="selector-option"><input type="radio" name="labelMode" value="id" checked><label> ID</label></span>
        <span class="selector-option"><input type="radio" name="labelMode" value="title"><label> Title</label></span>
    </div>
    <div class="selector-row">
        <span class="selector-label">Size:</span>
        <span class="selector-option"><input type="radio" name="sizeMode" value="original" checked><label> Original</label></span>
        <span class="selector-option"><input type="radio" name="sizeMode" value="half"><label> Compact</label></span>
        <span class="selector-option"><input type="radio" name="sizeMode" value="fit"><label> Fit to width</label></span>
    </div>
    <div class="selector-row"><span class="selector-label">Tags:</span><span class="selector-option">
            <input type="checkbox" id="tag-cart" class="tag-trigger-checkbox" data-tag="cart" name="tag-cart">
            <label for="tag-cart"> cart</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-catalog" class="tag-trigger-checkbox" data-tag="catalog" name="tag-catalog">
            <label for="tag-catalog"> catalog</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-checkout" class="tag-trigger-checkbox" data-tag="checkout" name="tag-checkout">
            <label for="tag-checkout"> checkout</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-commerce" class="tag-trigger-checkbox" data-tag="commerce" name="tag-commerce">
            <label for="tag-commerce"> commerce</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-core" class="tag-trigger-checkbox" data-tag="core" name="tag-core">
            <label for="tag-core"> core</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-customer" class="tag-trigger-checkbox" data-tag="customer" name="tag-customer">
            <label for="tag-customer"> customer</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-navigation" class="tag-trigger-checkbox" data-tag="navigation" name="tag-navigation">
            <label for="tag-navigation"> navigation</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-order" class="tag-trigger-checkbox" data-tag="order" name="tag-order">
            <label for="tag-order"> order</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-payment" class="tag-trigger-checkbox" data-tag="payment" name="tag-payment">
            <label for="tag-payment"> payment</label>
        </span><span class="selector-option">
            <input type="checkbox" id="tag-shipping" class="tag-trigger-checkbox" data-tag="shipping" name="tag-shipping">
            <label for="tag-shipping"> shipping</label>
        </span></div>
</div>
<h2>Semantic Descriptors</h2>

<table>
<thead>
<tr>
  <th align="center">Type</th>
  <th align="left">ID</th>
  <th align="left">Title</th>
  <th align="left">Contained</th>
  <th align="left">Extra Info</th>
</tr>
</thead>
<tbody>
<tr id="descriptor-author">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="author"></a><a href="#author" class="descriptor-id-link">author</a></td>
  <td align="left"><span style="white-space: normal;">Author</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/author" target="_blank">schema.org/author</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Name of the book&#039;s author. For multiple authors, names are comma-separated.</span></span></span></span></td>
</tr>
<tr id="descriptor-Book">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Book"></a><a href="#Book" class="descriptor-id-link">Book</a></td>
  <td align="left"><span style="white-space: normal;">Book</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#title">title</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#author">author</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#isbn">isbn</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#price">price</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#category">category</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doAddToCart">doAddToCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/Book" target="_blank">schema.org/Book</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen." title="Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.">Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.</span></span></span></span></td>
</tr>
<tr id="descriptor-Catalog">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Catalog"></a><a href="#Catalog" class="descriptor-id-link">Catalog</a></td>
  <td align="left"><span style="white-space: normal;">Book Catalog</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#Book">Book</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goListBooks">goListBooks</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goSearchBooks">goSearchBooks</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goGetCategories">goGetCategories</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToBookDetails">goToBookDetails</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCategory">goToCategory</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/CollectionPage" target="_blank">schema.org/CollectionPage</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions." title="Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.">Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.</span></span></span></span></td>
</tr>
<tr id="descriptor-category">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="category"></a><a href="#category" class="descriptor-id-link">category</a></td>
  <td align="left"><span style="white-space: normal;">Category</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/category" target="_blank">schema.org/category</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Genre or category of the book. Books may belong to multiple categories.</span></span></span></span></td>
</tr>
<tr id="descriptor-Category">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Category"></a><a href="#Category" class="descriptor-id-link">Category</a></td>
  <td align="left"><span style="white-space: normal;">Category</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#title">title</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToBookDetails">goToBookDetails</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/Category" target="_blank">schema.org/Category</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Book genre classification. May have a hierarchical structure with parent and child categories.</span></span></span></span></td>
</tr>
<tr id="descriptor-Checkout">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Checkout"></a><a href="#Checkout" class="descriptor-id-link">Checkout</a></td>
  <td align="left"><span style="white-space: normal;">Checkout Screen</span></td>
  <td align="left"><span class="type-indicator-small safe" title="Safe"></span><a href="#goToPayment">goToPayment</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doUserInfo">doUserInfo</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doShippingInfo">doShippingInfo</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-checkout">checkout</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed." title="Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.">Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.</span></span></span></span></td>
</tr>
<tr id="descriptor-doAddToCart">
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doAddToCart"></a><a href="#doAddToCart" class="descriptor-id-link">doAddToCart</a></td>
  <td align="left"><span style="white-space: normal;">Add to Cart</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#quantity">quantity</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##ShoppingCart">#ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Add the specified book to the shopping cart. If already in the cart, quantity is increased. Orders exceeding stock will result in an error.</span></span></span></span></td>
</tr>
<tr id="descriptor-doPaymentInfo">
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doPaymentInfo"></a><a href="#doPaymentInfo" class="descriptor-id-link">doPaymentInfo</a></td>
  <td align="left"><span style="white-space: normal;">Input Payment Information</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#paymentMethod">paymentMethod</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-payment">payment</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Payment">#Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Select order payment method and input necessary payment information. When credit card is selected, card information is input and validated.</span></span></span></span></td>
</tr>
<tr id="descriptor-doPlaceOrder">
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doPlaceOrder"></a><a href="#doPlaceOrder" class="descriptor-id-link">doPlaceOrder</a></td>
  <td align="left"><span style="white-space: normal;">Place Order</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-order">order</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Payment">#Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed." title="Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed.">Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed.</span></span></span></span></td>
</tr>
<tr id="descriptor-doRemoveFromCart">
  <td align="center"><span class="legend"><span class="legend-icon idempotent"></span></span></td>
  <td align="left"><a id="doRemoveFromCart"></a><a href="#doRemoveFromCart" class="descriptor-id-link">doRemoveFromCart</a></td>
  <td align="left"><span style="white-space: normal;">Remove Item from Cart</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##ShoppingCart">#ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Completely remove the specified item from the cart. If the item does not exist in the cart, no changes are made.</span></span></span></span></td>
</tr>
<tr id="descriptor-doShippingInfo">
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doShippingInfo"></a><a href="#doShippingInfo" class="descriptor-id-link">doShippingInfo</a></td>
  <td align="left"><span style="white-space: normal;">Input Shipping Information</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#shippingAddress">shippingAddress</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-shipping">shipping</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Checkout">#Checkout</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Input product delivery address. Features automatic address input using postal code lookup.</span></span></span></span></td>
</tr>
<tr id="descriptor-doUpdateQuantity">
  <td align="center"><span class="legend"><span class="legend-icon idempotent"></span></span></td>
  <td align="left"><a id="doUpdateQuantity"></a><a href="#doUpdateQuantity" class="descriptor-id-link">doUpdateQuantity</a></td>
  <td align="left"><span style="white-space: normal;">Update Cart Item Quantity</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#quantity">quantity</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##ShoppingCart">#ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error." title="Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.">Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.</span></span></span></span></td>
</tr>
<tr id="descriptor-doUserInfo">
  <td align="center"><span class="legend"><span class="legend-icon unsafe"></span></span></td>
  <td align="left"><a id="doUserInfo"></a><a href="#doUserInfo" class="descriptor-id-link">doUserInfo</a></td>
  <td align="left"><span style="white-space: normal;">Input User Information</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#userName">userName</a><br><span class="type-indicator-small semantic" title="Semantic"></span><a href="#userEmail">userEmail</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-customer">customer</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Checkout">#Checkout</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Input customer&#039;s name and email address. Email address is validated using regular expressions.</span></span></span></span></td>
</tr>
<tr id="descriptor-goGetCategories">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goGetCategories"></a><a href="#goGetCategories" class="descriptor-id-link">goGetCategories</a></td>
  <td align="left"><span style="white-space: normal;">Get Category List</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Catalog">#Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve list of all available book categories. For hierarchical categories, parent-child relationships are also returned.</span></span></span></span></td>
</tr>
<tr id="descriptor-goListBooks">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goListBooks"></a><a href="#goListBooks" class="descriptor-id-link">goListBooks</a></td>
  <td align="left"><span style="white-space: normal;">Get Book List</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Catalog">#Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve list of all books in the catalog. Can specify pagination (default 20 items/page) and sort order (newest, price, popularity, etc.).</span></span></span></span></td>
</tr>
<tr id="descriptor-goListCartItems">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goListCartItems"></a><a href="#goListCartItems" class="descriptor-id-link">goListCartItems</a></td>
  <td align="left"><span style="white-space: normal;">Get Cart Items List</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##ShoppingCart">#ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Retrieve all products in the current shopping cart, including their quantities, subtotals, and total amount.</span></span></span></span></td>
</tr>
<tr id="descriptor-goOrderDetails">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goOrderDetails"></a><a href="#goOrderDetails" class="descriptor-id-link">goOrderDetails</a></td>
  <td align="left"><span style="white-space: normal;">Display Order Details</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-order">order</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Payment">#Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc." title="Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc.">Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc.</span></span></span></span></td>
</tr>
<tr id="descriptor-goSearchBooks">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goSearchBooks"></a><a href="#goSearchBooks" class="descriptor-id-link">goSearchBooks</a></td>
  <td align="left"><span style="white-space: normal;">Search Books</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#query">query</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rel:</span><span class="meta-tag rel-tag">collection</span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Catalog">#Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc." title="Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.">Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToBookDetails">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToBookDetails"></a><a href="#goToBookDetails" class="descriptor-id-link">goToBookDetails</a></td>
  <td align="left"><span style="white-space: normal;">Go to Book Details Screen</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Book">#Book</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the detailed information screen for the selected book. Book ID must be specified.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToCart">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCart"></a><a href="#goToCart" class="descriptor-id-link">goToCart</a></td>
  <td align="left"><span style="white-space: normal;">Go to Cart Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##ShoppingCart">#ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the screen displaying the contents of the current shopping cart.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToCatalog">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCatalog"></a><a href="#goToCatalog" class="descriptor-id-link">goToCatalog</a></td>
  <td align="left"><span style="white-space: normal;">Go to Catalog Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Catalog">#Catalog</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the book catalog list screen. All books are displayed.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToCategory">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCategory"></a><a href="#goToCategory" class="descriptor-id-link">goToCategory</a></td>
  <td align="left"><span style="white-space: normal;">Go to Category Screen</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#id">id</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Category">#Category</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the category detail screen to view books filtered by the selected category.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToCheckout">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToCheckout"></a><a href="#goToCheckout" class="descriptor-id-link">goToCheckout</a></td>
  <td align="left"><span style="white-space: normal;">Go to Checkout Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Checkout">#Checkout</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the screen to confirm cart contents and proceed with purchase. Cannot transition if cart is empty.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToHome">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToHome"></a><a href="#goToHome" class="descriptor-id-link">goToHome</a></td>
  <td align="left"><span style="white-space: normal;">Go to Home Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Home">#Home</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the application&#039;s home screen. Accessible from any screen.</span></span></span></span></td>
</tr>
<tr id="descriptor-goToPayment">
  <td align="center"><span class="legend"><span class="legend-icon safe"></span></span></td>
  <td align="left"><a id="goToPayment"></a><a href="#goToPayment" class="descriptor-id-link">goToPayment</a></td>
  <td align="left"><span style="white-space: normal;">Go to Payment Screen</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">rt:</span><span class="meta-tag rt-tag"><a href="##Payment">#Payment</a></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Navigate to the payment screen to input payment information and complete the order.</span></span></span></span></td>
</tr>
<tr id="descriptor-Home">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Home"></a><a href="#Home" class="descriptor-id-link">Home</a></td>
  <td align="left"><span style="white-space: normal;">Home Screen</span></td>
  <td align="left"><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/WebPage" target="_blank">schema.org/WebPage</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-navigation">navigation</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Starting point of the application. Displays site-wide navigation and promotional information.</span></span></span></span></td>
</tr>
<tr id="descriptor-id">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="id"></a><a href="#id" class="descriptor-id-link">id</a></td>
  <td align="left"><span style="white-space: normal;">Identifier</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/identifier" target="_blank">schema.org/identifier</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-core">core</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Unique identifier for each resource. UUID or auto-generated integer.</span></span></span></span></td>
</tr>
<tr id="descriptor-isbn">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="isbn"></a><a href="#isbn" class="descriptor-id-link">isbn</a></td>
  <td align="left"><span style="white-space: normal;">ISBN</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/isbn" target="_blank">schema.org/isbn</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">International Standard Book Number. Formatted as ISBN-13 with hyphens.</span></span></span></span></td>
</tr>
<tr id="descriptor-Payment">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="Payment"></a><a href="#Payment" class="descriptor-id-link">Payment</a></td>
  <td align="left"><span style="white-space: normal;">Payment Screen</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#paymentMethod">paymentMethod</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goOrderDetails">goOrderDetails</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToHome">goToHome</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCart">goToCart</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doPaymentInfo">doPaymentInfo</a><br><span class="type-indicator-small unsafe" title="Unsafe"></span><a href="#doPlaceOrder">doPlaceOrder</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-payment">payment</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically." title="Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.">Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.</span></span></span></span></td>
</tr>
<tr id="descriptor-paymentMethod">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="paymentMethod"></a><a href="#paymentMethod" class="descriptor-id-link">paymentMethod</a></td>
  <td align="left"><span style="white-space: normal;">Payment Method</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/paymentMethod" target="_blank">schema.org/paymentMethod</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-payment">payment</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Method of payment for the order. Options include credit card, cash on delivery, bank transfer, etc.</span></span></span></span></td>
</tr>
<tr id="descriptor-price">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="price"></a><a href="#price" class="descriptor-id-link">price</a></td>
  <td align="left"><span style="white-space: normal;">Price</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/price" target="_blank">schema.org/price</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-commerce">commerce</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Sales price of the book. Pre-tax amount in JPY currency.</span></span></span></span></td>
</tr>
<tr id="descriptor-quantity">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="quantity"></a><a href="#quantity" class="descriptor-id-link">quantity</a></td>
  <td align="left"><span style="white-space: normal;">Quantity</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/quantityValue" target="_blank">schema.org/quantityValue</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-commerce">commerce</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Quantity of books in the cart. Integer value greater than or equal to 1.</span></span></span></span></td>
</tr>
<tr id="descriptor-query">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="query"></a><a href="#query" class="descriptor-id-link">query</a></td>
  <td align="left"><span style="white-space: normal;">Search Query</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Keywords or conditions used for book searches. Can search by title, author name, ISBN, etc.</span></span></span></span></td>
</tr>
<tr id="descriptor-shippingAddress">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="shippingAddress"></a><a href="#shippingAddress" class="descriptor-id-link">shippingAddress</a></td>
  <td align="left"><span style="white-space: normal;">Shipping Address</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/address" target="_blank">schema.org/address</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-shipping">shipping</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Delivery address for products. Includes postal code, prefecture, city, street address, and building name.</span></span></span></span></td>
</tr>
<tr id="descriptor-ShoppingCart">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="ShoppingCart"></a><a href="#ShoppingCart" class="descriptor-id-link">ShoppingCart</a></td>
  <td align="left"><span style="white-space: normal;">Shopping Cart</span></td>
  <td align="left"><span class="type-indicator-small semantic" title="Semantic"></span><a href="#totalAmount">totalAmount</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goListCartItems">goListCartItems</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCheckout">goToCheckout</a><br><span class="type-indicator-small safe" title="Safe"></span><a href="#goToCatalog">goToCatalog</a><br><span class="type-indicator-small idempotent" title="Idempotent"></span><a href="#doUpdateQuantity">doUpdateQuantity</a><br><span class="type-indicator-small idempotent" title="Idempotent"></span><a href="#doRemoveFromCart">doRemoveFromCart</a></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/ShoppingCart" target="_blank">schema.org/ShoppingCart</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-cart">cart</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag clickable" data-full="Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis." title="Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.">Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.</span></span></span></span></td>
</tr>
<tr id="descriptor-title">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="title"></a><a href="#title" class="descriptor-id-link">title</a></td>
  <td align="left"><span style="white-space: normal;">Title</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/name" target="_blank">schema.org/name</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-catalog">catalog</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Title of book or category name. String with a maximum of 200 characters.</span></span></span></span></td>
</tr>
<tr id="descriptor-totalAmount">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="totalAmount"></a><a href="#totalAmount" class="descriptor-id-link">totalAmount</a></td>
  <td align="left"><span style="white-space: normal;">Total Amount</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/totalPrice" target="_blank">schema.org/totalPrice</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-commerce">commerce</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Total amount for an order or cart contents. Displayed with tax included.</span></span></span></span></td>
</tr>
<tr id="descriptor-userEmail">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="userEmail"></a><a href="#userEmail" class="descriptor-id-link">userEmail</a></td>
  <td align="left"><span style="white-space: normal;">Email Address</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/email" target="_blank">schema.org/email</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-customer">customer</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Customer&#039;s contact email address. Used for sending order confirmation emails.</span></span></span></span></td>
</tr>
<tr id="descriptor-userName">
  <td align="center"><span class="legend"><span class="legend-icon semantic"></span></span></td>
  <td align="left"><a id="userName"></a><a href="#userName" class="descriptor-id-link">userName</a></td>
  <td align="left"><span style="white-space: normal;">User Name</span></td>
  <td align="left"></td>
  <td align="left"><span style="white-space: normal;"><span class="meta-container"><span class="meta-item"><span class="meta-label">def:</span><span class="meta-tag def-tag"><a href="https://schema.org/name" target="_blank">schema.org/name</a></span></span><span class="meta-item"><span class="meta-label">tag:</span><span class="meta-values"><span class="meta-tag tag-tag"><a href="#tag-customer">customer</a></span></span></span><span class="meta-item"><span class="meta-label">doc:</span><span class="meta-tag doc-tag">Name of the customer. First and last name separated by a space.</span></span></span></span></td>
</tr>
</tbody>
</table>
<div class="legend">
    <div class="legend-item" title="Semantic"><span class="legend-icon semantic"></span> Semantic</div>
    <div class="legend-item" title="Safe"><span class="legend-icon safe"></span> Safe</div>
    <div class="legend-item" title="Unsafe"><span class="legend-icon unsafe"></span> Unsafe</div>
    <div class="legend-item" title="Idempotent"><span class="legend-icon idempotent"></span> Idempotent</div>
</div>
<h2>Links</h2>
<ul>
<li><a rel="issue" href="https://github.com/example/online-bookstore-api/issues">issue</a></li>
</ul>
<div style="display:none"><code id="alps-profile">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;alps
        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
        xsi:noNamespaceSchemaLocation=&quot;https://alps-io.github.io/schemas/alps.xsd&quot;&gt;
    &lt;title&gt;ALPS Book Store&lt;/title&gt;
    &lt;doc&gt;ALPS profile for managing an online bookstore catalog and defining the user purchase flow. This profile provides semantic definitions for both RESTful APIs and UI.&lt;/doc&gt;
    &lt;link href=&quot;https://github.com/example/online-bookstore-api/issues&quot; rel=&quot;issue&quot;/&gt;

    &lt;!-- Ontology () --&gt;
    &lt;descriptor id=&quot;id&quot; def=&quot;https://schema.org/identifier&quot; title=&quot;Identifier&quot; tag=&quot;core&quot;&gt;
        &lt;doc&gt;Unique identifier for each resource. UUID or auto-generated integer.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;title&quot; def=&quot;https://schema.org/name&quot; title=&quot;Title&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Title of book or category name. String with a maximum of 200 characters.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;author&quot; def=&quot;https://schema.org/author&quot; title=&quot;Author&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Name of the book's author. For multiple authors, names are comma-separated.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;isbn&quot; def=&quot;https://schema.org/isbn&quot; title=&quot;ISBN&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;International Standard Book Number. Formatted as ISBN-13 with hyphens.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;price&quot; def=&quot;https://schema.org/price&quot; title=&quot;Price&quot; tag=&quot;commerce&quot;&gt;
        &lt;doc&gt;Sales price of the book. Pre-tax amount in JPY currency.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;category&quot; def=&quot;https://schema.org/category&quot; title=&quot;Category&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Genre or category of the book. Books may belong to multiple categories.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;quantity&quot; def=&quot;https://schema.org/quantityValue&quot; title=&quot;Quantity&quot; tag=&quot;commerce&quot;&gt;
        &lt;doc&gt;Quantity of books in the cart. Integer value greater than or equal to 1.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;totalAmount&quot; def=&quot;https://schema.org/totalPrice&quot; title=&quot;Total Amount&quot; tag=&quot;commerce&quot;&gt;
        &lt;doc&gt;Total amount for an order or cart contents. Displayed with tax included.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;userName&quot; def=&quot;https://schema.org/name&quot; title=&quot;User Name&quot; tag=&quot;customer&quot;&gt;
        &lt;doc&gt;Name of the customer. First and last name separated by a space.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;userEmail&quot; def=&quot;https://schema.org/email&quot; title=&quot;Email Address&quot; tag=&quot;customer&quot;&gt;
        &lt;doc&gt;Customer's contact email address. Used for sending order confirmation emails.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;shippingAddress&quot; def=&quot;https://schema.org/address&quot; title=&quot;Shipping Address&quot; tag=&quot;shipping&quot;&gt;
        &lt;doc&gt;Delivery address for products. Includes postal code, prefecture, city, street address, and building name.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;paymentMethod&quot; def=&quot;https://schema.org/paymentMethod&quot; title=&quot;Payment Method&quot; tag=&quot;payment&quot;&gt;
        &lt;doc&gt;Method of payment for the order. Options include credit card, cash on delivery, bank transfer, etc.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;query&quot; title=&quot;Search Query&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Keywords or conditions used for book searches. Can search by title, author name, ISBN, etc.&lt;/doc&gt;
    &lt;/descriptor&gt;

    &lt;!-- Taxonomy --&gt;
    &lt;descriptor id=&quot;Home&quot; def=&quot;https://schema.org/WebPage&quot; title=&quot;Home Screen&quot; tag=&quot;navigation&quot;&gt;
        &lt;doc&gt;Starting point of the application. Displays site-wide navigation and promotional information.&lt;/doc&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Catalog&quot; def=&quot;https://schema.org/CollectionPage&quot; title=&quot;Book Catalog&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.&lt;/doc&gt;
        &lt;descriptor href=&quot;#goListBooks&quot;/&gt;
        &lt;descriptor href=&quot;#goSearchBooks&quot;/&gt;
        &lt;descriptor href=&quot;#goGetCategories&quot;/&gt;
        &lt;descriptor href=&quot;#goToBookDetails&quot;/&gt;
        &lt;descriptor href=&quot;#goToCategory&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
        &lt;descriptor href=&quot;#Book&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Book&quot; def=&quot;https://schema.org/Book&quot; title=&quot;Book&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#title&quot;/&gt;
        &lt;descriptor href=&quot;#author&quot;/&gt;
        &lt;descriptor href=&quot;#isbn&quot;/&gt;
        &lt;descriptor href=&quot;#price&quot;/&gt;
        &lt;descriptor href=&quot;#category&quot;/&gt;
        &lt;descriptor href=&quot;#doAddToCart&quot;/&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Category&quot; def=&quot;https://schema.org/Category&quot; title=&quot;Category&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Book genre classification. May have a hierarchical structure with parent and child categories.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#title&quot;/&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
        &lt;descriptor href=&quot;#goToBookDetails&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;ShoppingCart&quot; def=&quot;https://schema.org/ShoppingCart&quot; title=&quot;Shopping Cart&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.&lt;/doc&gt;
        &lt;descriptor href=&quot;#totalAmount&quot;/&gt;
        &lt;descriptor href=&quot;#goListCartItems&quot;/&gt;
        &lt;descriptor href=&quot;#doUpdateQuantity&quot;/&gt;
        &lt;descriptor href=&quot;#doRemoveFromCart&quot;/&gt;
        &lt;descriptor href=&quot;#goToCheckout&quot;/&gt;
        &lt;descriptor href=&quot;#goToCatalog&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Checkout&quot; title=&quot;Checkout Screen&quot; tag=&quot;checkout&quot;&gt;
        &lt;doc&gt;Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.&lt;/doc&gt;
        &lt;descriptor href=&quot;#doUserInfo&quot;/&gt;
        &lt;descriptor href=&quot;#doShippingInfo&quot;/&gt;
        &lt;descriptor href=&quot;#goToPayment&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;Payment&quot; title=&quot;Payment Screen&quot; tag=&quot;payment&quot;&gt;
        &lt;doc&gt;Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.&lt;/doc&gt;
        &lt;descriptor href=&quot;#paymentMethod&quot;/&gt;
        &lt;descriptor href=&quot;#doPaymentInfo&quot;/&gt;
        &lt;descriptor href=&quot;#doPlaceOrder&quot;/&gt;
        &lt;descriptor href=&quot;#goOrderDetails&quot;/&gt;
        &lt;descriptor href=&quot;#goToHome&quot;/&gt;
        &lt;descriptor href=&quot;#goToCart&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;!-- Choreography --&gt;
    &lt;descriptor id=&quot;goToHome&quot; type=&quot;safe&quot; rt=&quot;#Home&quot; title=&quot;Go to Home Screen&quot;&gt;
        &lt;doc&gt;Navigate to the application's home screen. Accessible from any screen.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCatalog&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; title=&quot;Go to Catalog Screen&quot;&gt;
        &lt;doc&gt;Navigate to the book catalog list screen. All books are displayed.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToBookDetails&quot; type=&quot;safe&quot; rt=&quot;#Book&quot; title=&quot;Go to Book Details Screen&quot;&gt;
        &lt;doc&gt;Navigate to the detailed information screen for the selected book. Book ID must be specified.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCart&quot; type=&quot;safe&quot; rt=&quot;#ShoppingCart&quot; title=&quot;Go to Cart Screen&quot;&gt;
        &lt;doc&gt;Navigate to the screen displaying the contents of the current shopping cart.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCheckout&quot; type=&quot;safe&quot; rt=&quot;#Checkout&quot; title=&quot;Go to Checkout Screen&quot;&gt;
        &lt;doc&gt;Navigate to the screen to confirm cart contents and proceed with purchase. Cannot transition if cart is empty.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToPayment&quot; type=&quot;safe&quot; rt=&quot;#Payment&quot; title=&quot;Go to Payment Screen&quot;&gt;
        &lt;doc&gt;Navigate to the payment screen to input payment information and complete the order.&lt;/doc&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;goListBooks&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; rel=&quot;collection&quot; title=&quot;Get Book List&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Retrieve list of all books in the catalog. Can specify pagination (default 20 items/page) and sort order (newest, price, popularity, etc.).&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goSearchBooks&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; rel=&quot;collection&quot; title=&quot;Search Books&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.&lt;/doc&gt;
        &lt;descriptor href=&quot;#query&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goGetCategories&quot; type=&quot;safe&quot; rt=&quot;#Catalog&quot; rel=&quot;collection&quot; title=&quot;Get Category List&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Retrieve list of all available book categories. For hierarchical categories, parent-child relationships are also returned.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goToCategory&quot; type=&quot;safe&quot; rt=&quot;#Category&quot; title=&quot;Go to Category Screen&quot; tag=&quot;catalog&quot;&gt;
        &lt;doc&gt;Navigate to the category detail screen to view books filtered by the selected category.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;doAddToCart&quot; type=&quot;unsafe&quot; rt=&quot;#ShoppingCart&quot; rel=&quot;collection&quot; title=&quot;Add to Cart&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Add the specified book to the shopping cart. If already in the cart, quantity is increased. Orders exceeding stock will result in an error.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#quantity&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;goListCartItems&quot; type=&quot;safe&quot; rt=&quot;#ShoppingCart&quot; rel=&quot;collection&quot; title=&quot;Get Cart Items List&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Retrieve all products in the current shopping cart, including their quantities, subtotals, and total amount.&lt;/doc&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doUpdateQuantity&quot; type=&quot;idempotent&quot; rt=&quot;#ShoppingCart&quot; title=&quot;Update Cart Item Quantity&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
        &lt;descriptor href=&quot;#quantity&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doRemoveFromCart&quot; type=&quot;idempotent&quot; rt=&quot;#ShoppingCart&quot; title=&quot;Remove Item from Cart&quot; tag=&quot;cart&quot;&gt;
        &lt;doc&gt;Completely remove the specified item from the cart. If the item does not exist in the cart, no changes are made.&lt;/doc&gt;
        &lt;descriptor href=&quot;#id&quot;/&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;doUserInfo&quot; type=&quot;unsafe&quot; rt=&quot;#Checkout&quot; title=&quot;Input User Information&quot; tag=&quot;customer&quot;&gt;
        &lt;doc&gt;Input customer's name and email address. Email address is validated using regular expressions.&lt;/doc&gt;
        &lt;descriptor href=&quot;#userName&quot;/&gt;
        &lt;descriptor href=&quot;#userEmail&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doShippingInfo&quot; type=&quot;unsafe&quot; rt=&quot;#Checkout&quot; title=&quot;Input Shipping Information&quot; tag=&quot;shipping&quot;&gt;
        &lt;doc&gt;Input product delivery address. Features automatic address input using postal code lookup.&lt;/doc&gt;
        &lt;descriptor href=&quot;#shippingAddress&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doPaymentInfo&quot; type=&quot;unsafe&quot; rt=&quot;#Payment&quot; title=&quot;Input Payment Information&quot; tag=&quot;payment&quot;&gt;
        &lt;doc&gt;Select order payment method and input necessary payment information. When credit card is selected, card information is input and validated.&lt;/doc&gt;
        &lt;descriptor href=&quot;#paymentMethod&quot;/&gt;
    &lt;/descriptor&gt;
    &lt;descriptor id=&quot;doPlaceOrder&quot; type=&quot;unsafe&quot; rt=&quot;#Payment&quot; title=&quot;Place Order&quot; tag=&quot;order&quot;&gt;
        &lt;doc&gt;Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed.&lt;/doc&gt;
    &lt;/descriptor&gt;

    &lt;descriptor id=&quot;goOrderDetails&quot; type=&quot;safe&quot; rt=&quot;#Payment&quot; title=&quot;Display Order Details&quot; tag=&quot;order&quot;&gt;
        &lt;doc&gt;Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc.&lt;/doc&gt;
    &lt;/descriptor&gt;
&lt;/alps&gt;
</code></div>
</div>
<script>
// Tag filtering
const tagDescriptorMap = {"cart":["ShoppingCart","doAddToCart","goListCartItems","doUpdateQuantity","doRemoveFromCart"],"catalog":["title","author","isbn","category","query","Catalog","Book","Category","goListBooks","goSearchBooks","goGetCategories","goToCategory"],"checkout":["Checkout"],"commerce":["price","quantity","totalAmount"],"core":["id"],"customer":["userName","userEmail","doUserInfo"],"navigation":["Home"],"order":["doPlaceOrder","goOrderDetails"],"payment":["paymentMethod","Payment","doPaymentInfo"],"shipping":["shippingAddress","doShippingInfo"]};

const changeColorByTitle = (titleOrClass, newNodeColor, newEdgeColor, highlight = false) => {
    const elements = Array.from(document.getElementsByTagName('g'));
    elements.forEach(element => {
        const titleElement = element.getElementsByTagName('title')[0];
        const title = titleElement ? titleElement.textContent : '';
        if (title === titleOrClass || element.classList.contains(titleOrClass)) {
            const polygons = Array.from(element.getElementsByTagName('polygon'));
            const paths = Array.from(element.getElementsByTagName('path'));
            polygons.forEach(polygon => polygon.setAttribute('fill', newNodeColor));
            paths.forEach(path => {
                path.setAttribute('stroke', newEdgeColor);
                if (highlight) {
                    path.setAttribute('stroke-width', '3');
                    path.style.filter = 'drop-shadow(0 0 4px ' + newEdgeColor + ')';
                } else {
                    path.setAttribute('stroke-width', '1');
                    path.style.filter = '';
                }
            });
        }
    });
};

const setupTagEventListener = (eventName, ids, color, defaultColor = 'lightgrey', defaultEdgeColor = 'black') => {
    const changeColor = (useDefault) => {
        ids.forEach(id => {
            changeColorByTitle(id, useDefault ? defaultColor : color, useDefault ? defaultEdgeColor : color, !useDefault);
            const row = document.querySelector('tr:has(a[href="#' + id + '"])');
            if (row) row.style.backgroundColor = useDefault ? '' : '#fffde7';
        });
    };
    document.addEventListener('tagon-' + eventName, () => changeColor(false));
    document.addEventListener('tagoff-' + eventName, () => changeColor(true));
};

const setupTagTrigger = () => {
    const checkboxes = document.querySelectorAll('.tag-trigger-checkbox');
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const tag = this.getAttribute('data-tag');
            this.checked ?
                document.dispatchEvent(new CustomEvent('tagon-' + tag)) :
                document.dispatchEvent(new CustomEvent('tagoff-' + tag));
        });
    });
};

const tagColors = ['LightGreen', 'SkyBlue', 'LightCoral', 'LightSalmon', 'Khaki', 'Plum', 'Wheat'];
let colorIndex = 0;
Object.keys(tagDescriptorMap).forEach(tag => {
    const ids = tagDescriptorMap[tag];
    const color = tagColors[colorIndex % tagColors.length];
    colorIndex++;
    setupTagEventListener(tag, ids, color);
});

setupTagTrigger();

// Label mode switching
window.alpsData = {"alps":{"title":"ALPS Book Store","doc":"ALPS profile for managing an online bookstore catalog and defining the user purchase flow. This profile provides semantic definitions for both RESTful APIs and UI.","descriptor":[{"id":"id","title":"Identifier","tag":"core","def":"https://schema.org/identifier","doc":"Unique identifier for each resource. UUID or auto-generated integer."},{"id":"title","title":"Title","tag":"catalog","def":"https://schema.org/name","doc":"Title of book or category name. String with a maximum of 200 characters."},{"id":"author","title":"Author","tag":"catalog","def":"https://schema.org/author","doc":"Name of the book's author. For multiple authors, names are comma-separated."},{"id":"isbn","title":"ISBN","tag":"catalog","def":"https://schema.org/isbn","doc":"International Standard Book Number. Formatted as ISBN-13 with hyphens."},{"id":"price","title":"Price","tag":"commerce","def":"https://schema.org/price","doc":"Sales price of the book. Pre-tax amount in JPY currency."},{"id":"category","title":"Category","tag":"catalog","def":"https://schema.org/category","doc":"Genre or category of the book. Books may belong to multiple categories."},{"id":"quantity","title":"Quantity","tag":"commerce","def":"https://schema.org/quantityValue","doc":"Quantity of books in the cart. Integer value greater than or equal to 1."},{"id":"totalAmount","title":"Total Amount","tag":"commerce","def":"https://schema.org/totalPrice","doc":"Total amount for an order or cart contents. Displayed with tax included."},{"id":"userName","title":"User Name","tag":"customer","def":"https://schema.org/name","doc":"Name of the customer. First and last name separated by a space."},{"id":"userEmail","title":"Email Address","tag":"customer","def":"https://schema.org/email","doc":"Customer's contact email address. Used for sending order confirmation emails."},{"id":"shippingAddress","title":"Shipping Address","tag":"shipping","def":"https://schema.org/address","doc":"Delivery address for products. Includes postal code, prefecture, city, street address, and building name."},{"id":"paymentMethod","title":"Payment Method","tag":"payment","def":"https://schema.org/paymentMethod","doc":"Method of payment for the order. Options include credit card, cash on delivery, bank transfer, etc."},{"id":"query","title":"Search Query","tag":"catalog","doc":"Keywords or conditions used for book searches. Can search by title, author name, ISBN, etc."},{"id":"Home","title":"Home Screen","tag":"navigation","def":"https://schema.org/WebPage","doc":"Starting point of the application. Displays site-wide navigation and promotional information.","descriptor":[{"href":"#goToCatalog"},{"href":"#goToCart"}]},{"id":"Catalog","title":"Book Catalog","tag":"catalog","def":"https://schema.org/CollectionPage","doc":"Screen displaying all books. Provides category filtering, keyword search, and sorting functions. Default display is ordered by recent additions.","descriptor":[{"href":"#goListBooks"},{"href":"#goSearchBooks"},{"href":"#goGetCategories"},{"href":"#goToBookDetails"},{"href":"#goToCategory"},{"href":"#goToCart"},{"href":"#Book"}]},{"id":"Book","title":"Book","tag":"catalog","def":"https://schema.org/Book","doc":"Screen displaying individual book information. Shows detailed information, reviews, and related books. Items can be added to cart from this screen.","descriptor":[{"href":"#id"},{"href":"#title"},{"href":"#author"},{"href":"#isbn"},{"href":"#price"},{"href":"#category"},{"href":"#doAddToCart"},{"href":"#goToCatalog"}]},{"id":"Category","title":"Category","tag":"catalog","def":"https://schema.org/Category","doc":"Book genre classification. May have a hierarchical structure with parent and child categories.","descriptor":[{"href":"#id"},{"href":"#title"},{"href":"#goToCatalog"},{"href":"#goToBookDetails"}]},{"id":"ShoppingCart","title":"Shopping Cart","tag":"cart","def":"https://schema.org/ShoppingCart","doc":"Cart containing books the user intends to purchase. Allows quantity changes, deletion, and total amount confirmation. Managed on a session basis.","descriptor":[{"href":"#totalAmount"},{"href":"#goListCartItems"},{"href":"#doUpdateQuantity"},{"href":"#doRemoveFromCart"},{"href":"#goToCheckout"},{"href":"#goToCatalog"}]},{"id":"Checkout","title":"Checkout Screen","tag":"checkout","doc":"Purchase procedure screen. Input user information, delivery destination, and proceed to payment. Displays final confirmation before order is placed.","descriptor":[{"href":"#doUserInfo"},{"href":"#doShippingInfo"},{"href":"#goToPayment"},{"href":"#goToCart"}]},{"id":"Payment","title":"Payment Screen","tag":"payment","doc":"Screen for entering payment information, confirming the order, and displaying order completion details. Handles payment method selection, payment validation, order placement, and shows order number, total amount, and estimated delivery date upon completion. A confirmation email is sent automatically.","descriptor":[{"href":"#paymentMethod"},{"href":"#doPaymentInfo"},{"href":"#doPlaceOrder"},{"href":"#goOrderDetails"},{"href":"#goToHome"},{"href":"#goToCart"}]},{"id":"goToHome","type":"safe","title":"Go to Home Screen","rt":"#Home","doc":"Navigate to the application's home screen. Accessible from any screen."},{"id":"goToCatalog","type":"safe","title":"Go to Catalog Screen","rt":"#Catalog","doc":"Navigate to the book catalog list screen. All books are displayed."},{"id":"goToBookDetails","type":"safe","title":"Go to Book Details Screen","rt":"#Book","doc":"Navigate to the detailed information screen for the selected book. Book ID must be specified.","descriptor":[{"href":"#id"}]},{"id":"goToCart","type":"safe","title":"Go to Cart Screen","rt":"#ShoppingCart","doc":"Navigate to the screen displaying the contents of the current shopping cart."},{"id":"goToCheckout","type":"safe","title":"Go to Checkout Screen","rt":"#Checkout","doc":"Navigate to the screen to confirm cart contents and proceed with purchase. Cannot transition if cart is empty."},{"id":"goToPayment","type":"safe","title":"Go to Payment Screen","rt":"#Payment","doc":"Navigate to the payment screen to input payment information and complete the order."},{"id":"goListBooks","type":"safe","title":"Get Book List","rt":"#Catalog","tag":"catalog","rel":"collection","doc":"Retrieve list of all books in the catalog. Can specify pagination (default 20 items/page) and sort order (newest, price, popularity, etc.)."},{"id":"goSearchBooks","type":"safe","title":"Search Books","rt":"#Catalog","tag":"catalog","rel":"collection","doc":"Search for books based on specified search query. Can search across multiple fields including title, author name, content description, ISBN, etc.","descriptor":[{"href":"#query"}]},{"id":"goGetCategories","type":"safe","title":"Get Category List","rt":"#Catalog","tag":"catalog","rel":"collection","doc":"Retrieve list of all available book categories. For hierarchical categories, parent-child relationships are also returned."},{"id":"goToCategory","type":"safe","title":"Go to Category Screen","rt":"#Category","tag":"catalog","doc":"Navigate to the category detail screen to view books filtered by the selected category.","descriptor":[{"href":"#id"}]},{"id":"doAddToCart","type":"unsafe","title":"Add to Cart","rt":"#ShoppingCart","tag":"cart","rel":"collection","doc":"Add the specified book to the shopping cart. If already in the cart, quantity is increased. Orders exceeding stock will result in an error.","descriptor":[{"href":"#id"},{"href":"#quantity"}]},{"id":"goListCartItems","type":"safe","title":"Get Cart Items List","rt":"#ShoppingCart","tag":"cart","rel":"collection","doc":"Retrieve all products in the current shopping cart, including their quantities, subtotals, and total amount."},{"id":"doUpdateQuantity","type":"idempotent","title":"Update Cart Item Quantity","rt":"#ShoppingCart","tag":"cart","doc":"Update the quantity of a specific product in the cart. Values less than or equal to 0 cannot be specified. Quantities exceeding stock will result in an error.","descriptor":[{"href":"#id"},{"href":"#quantity"}]},{"id":"doRemoveFromCart","type":"idempotent","title":"Remove Item from Cart","rt":"#ShoppingCart","tag":"cart","doc":"Completely remove the specified item from the cart. If the item does not exist in the cart, no changes are made.","descriptor":[{"href":"#id"}]},{"id":"doUserInfo","type":"unsafe","title":"Input User Information","rt":"#Checkout","tag":"customer","doc":"Input customer's name and email address. Email address is validated using regular expressions.","descriptor":[{"href":"#userName"},{"href":"#userEmail"}]},{"id":"doShippingInfo","type":"unsafe","title":"Input Shipping Information","rt":"#Checkout","tag":"shipping","doc":"Input product delivery address. Features automatic address input using postal code lookup.","descriptor":[{"href":"#shippingAddress"}]},{"id":"doPaymentInfo","type":"unsafe","title":"Input Payment Information","rt":"#Payment","tag":"payment","doc":"Select order payment method and input necessary payment information. When credit card is selected, card information is input and validated.","descriptor":[{"href":"#paymentMethod"}]},{"id":"doPlaceOrder","type":"unsafe","title":"Place Order","rt":"#Payment","tag":"order","doc":"Confirm order based on user input information, process payment, and display order confirmation details on the payment screen. Payment processing is executed, inventory is secured, and a confirmation email is sent. This operation cannot be reversed."},{"id":"goOrderDetails","type":"safe","title":"Display Order Details","rt":"#Payment","tag":"order","doc":"Display detailed information for the confirmed order on the payment screen. Includes order number, list of purchased products, total amount, delivery destination, payment method, etc."}],"link":[{"rel":"issue","href":"https://github.com/example/online-bookstore-api/issues","title":""}]}};

function generateDotFromAlps(data, labelMode) {
    const descriptors = data.alps?.descriptor || [];
    const transitions = descriptors.filter(d => d.type && d.rt);
    const rtTargets = new Set(transitions.map(t => t.rt.replace('#', '')));
    const states = descriptors.filter(d => d.id && rtTargets.has(d.id));

    const getLabel = (descriptor) => {
        if (labelMode === 'title') {
            return descriptor.title || descriptor.id;
        }
        return descriptor.id;
    };

    let dot = 'digraph application_state_diagram {\n' +
        '    graph [labelloc="t"; fontname="Helvetica"];\n' +
        '    node [shape = box, style = "bold,filled" fillcolor="lightgray", margin="0.3,0.1"];\n\n';

    states.forEach(state => {
        if (state.id) {
            dot += '    ' + state.id + ' [margin=0.1, label="' + getLabel(state) + '", shape=box, URL="#' + state.id + '"]\n';
        }
    });

    dot += '\n';

    transitions.forEach(trans => {
        if (trans.id && trans.rt) {
            const targetState = trans.rt.replace('#', '');
            const sourceStates = findSourceStatesForTransition(trans.id, descriptors);
            const color = getTransitionColor(trans.type);
            const transLabel = getLabel(trans);
            sourceStates.forEach(sourceState => {
                dot += '    ' + sourceState + ' -> ' + targetState + ' [label="' + transLabel + '" URL="#' + trans.id + '" fontsize=13 class="' + trans.id + '" penwidth=1.5 color="' + color + '"];\n';
            });
        }
    });

    dot += '\n';
    states.forEach(state => {
        if (state.id) {
            dot += '    ' + state.id + ' [label="' + getLabel(state) + '" URL="#' + state.id + '"]\n';
        }
    });
    dot += '\n}';
    return dot;
}

function findSourceStatesForTransition(transitionId, descriptors) {
    const sources = [];
    descriptors.forEach(d => {
        if (d.descriptor && Array.isArray(d.descriptor)) {
            const hasTransition = d.descriptor.some(child => {
                const childId = child.href ? child.href.replace('#', '') : child.id;
                return childId === transitionId;
            });
            if (hasTransition && d.id) {
                sources.push(d.id);
            }
        }
    });
    return sources;
}

function getTransitionColor(type) {
    switch (type) {
        case 'safe': return '#00A86B';
        case 'unsafe': return '#FF4136';
        case 'idempotent': return '#D4A000';
        default: return '#000000';
    }
}

async function regenerateSvg(labelMode) {
    const svgGraph = document.getElementById('svg-graph');
    svgGraph.innerHTML = '<p>Regenerating diagram...</p>';

    try {
        const dotContent = generateDotFromAlps(window.alpsData, labelMode);
        const vizInstance = new Viz();
        const svgString = await vizInstance.renderString(dotContent, { format: 'svg' });
        svgGraph.innerHTML = svgString;
    } catch (error) {
        console.error('Error regenerating SVG:', error);
        svgGraph.innerHTML = '<p style="color:red;">Error regenerating diagram: ' + error.message + '</p>';
    }
}

document.querySelectorAll('input[name="labelMode"]').forEach(radio => {
    radio.addEventListener('change', function() {
        regenerateSvg(this.value);
    });
});

// Size mode toggle - keep selector position stable
document.querySelectorAll('input[name="sizeMode"]').forEach(radio => {
    radio.addEventListener('change', function() {
        const selector = this.closest('.selector-container');
        const selectorRect = selector.getBoundingClientRect();
        const selectorTopBefore = selectorRect.top;

        const svgContainer = document.getElementById('svg-container');
        svgContainer.classList.remove('fit-width', 'half-size');
        if (this.value === 'fit') {
            svgContainer.classList.add('fit-width');
        } else if (this.value === 'half') {
            svgContainer.classList.add('half-size');
        }

        // Adjust scroll to keep selector at same screen position (instant, no animation)
        requestAnimationFrame(() => {
            const selectorTopAfter = selector.getBoundingClientRect().top;
            const scrollDiff = selectorTopAfter - selectorTopBefore;
            window.scrollTo({ top: window.scrollY + scrollDiff, behavior: 'instant' });
            if (this.value === 'original' || this.value === 'half') {
                centerSvgScroll();
            }
        });
    });
});

function autoSelectSizeMode() {
    const svgContainer = document.getElementById('svg-container');
    const svgElement = document.querySelector('#svg-graph svg');
    const fitRadio = document.querySelector('input[name="sizeMode"][value="fit"]');
    const originalRadio = document.querySelector('input[name="sizeMode"][value="original"]');
    const compactOption = document.querySelector('input[name="sizeMode"][value="half"]')?.closest('.selector-option');

    if (!svgContainer || !svgElement) return;

    svgContainer.classList.remove('fit-width', 'half-size');

    setTimeout(() => {
        const svgWidth = svgElement.getBoundingClientRect().width;
        const containerWidth = svgContainer.clientWidth;

        // Show Compact option only when SVG is wider than container
        if (compactOption) {
            compactOption.style.display = svgWidth > containerWidth ? 'inline-block' : 'none';
        }

        if (svgWidth > containerWidth) {
            svgContainer.classList.add('fit-width');
            if (fitRadio) fitRadio.checked = true;
        } else {
            svgContainer.classList.remove('fit-width');
            if (originalRadio) originalRadio.checked = true;
        }
    }, 0);
}

function centerSvgScroll() {
    const svgContainer = document.getElementById('svg-container');
    if (svgContainer && !svgContainer.classList.contains('fit-width')) {
        const scrollMax = svgContainer.scrollWidth - svgContainer.clientWidth;
        if (scrollMax > 0) {
            svgContainer.scrollLeft = scrollMax / 2;
        }
    }
}

document.addEventListener('DOMContentLoaded', autoSelectSizeMode);
window.addEventListener('resize', autoSelectSizeMode);

// loadText: Update from raw ALPS text (for CDP/watch mode)
// Editor parses and renders - CLI just sends text
window.loadText = async function(text) {
    try {
        // Auto-detect and parse (JSON or XML)
        let newAlpsData;
        const trimmed = text.trim();
        if (trimmed.startsWith('{')) {
            newAlpsData = JSON.parse(text);
        } else if (trimmed.startsWith('<')) {
            // Simple XML to JSON (basic support)
            const parser = new DOMParser();
            const doc = parser.parseFromString(text, 'text/xml');
            // For now, just update the source display
            console.log('XML parsing in browser - limited support');
            return;
        } else {
            throw new Error('Unknown format');
        }

        window.alpsData = newAlpsData;

        // Update title
        const title = newAlpsData?.alps?.title || 'ALPS Profile';
        document.querySelector('h1').textContent = title;
        document.title = title;

        // Update description
        const doc = newAlpsData?.alps?.doc;
        const docText = typeof doc === 'object' ? doc?.value || '' : doc || '';
        document.querySelector('.markdown-body > p').textContent = docText;

        // Regenerate diagram
        const labelMode = document.querySelector('input[name="labelMode"]:checked')?.value || 'id';
        await regenerateSvg(labelMode);

        // Set Fit to Width
        const svgContainer = document.getElementById('svg-container');
        const fitRadio = document.querySelector('input[name="sizeMode"][value="fit"]');
        if (svgContainer && fitRadio) {
            svgContainer.classList.add('fit-width');
            fitRadio.checked = true;
        }

        console.log('ALPS reloaded via loadText');
    } catch (e) {
        console.error('loadText error:', e);
    }
};
</script>
</body>
</html>